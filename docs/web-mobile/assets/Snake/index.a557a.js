window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({BaseLayer:[function(t,e,o){"use strict";cc._RF.push(e,"ad71eVK+eFDtJf+lXCfaJkl","BaseLayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.executePreFrame=function(t,e){var o=this;return new Promise(function(n){var i=t,r=function(){for(var t=(new Date).getTime(),a=i.next();;a=i.next()){if(null==a||a.done)return void n(null);if((new Date).getTime()-t>e)return void o.scheduleOnce(function(){r()})}};r()})},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],BaseProp:[function(t,e,o){"use strict";cc._RF.push(e,"0df72RPaXdM+rSf41/lqWgt","BaseProp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseProp=void 0;var a,s,c=t("../Constant"),l=t("../Manager/NodePoolMgr");(function(t){t[t.Normal=0]="Normal",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Bottom=3]="Bottom",t[t.Top=4]="Top",t[t.LeftBottm=5]="LeftBottm",t[t.LeftTop=6]="LeftTop",t[t.RightBottom=7]="RightBottom",t[t.RightTop=8]="RightTop"})(a||(a={})),function(t){t[t.MOVEING=0]="MOVEING",t[t.EATED=1]="EATED"}(s||(s={}));var p=cc._decorator,h=p.ccclass,d=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view_prop=null,e.viewList_props=[],e.dir=null,e.speed=c.SNAKE_SPEED,e.dirTimer=null,e.safePosX=null,e.safePosY=null,e.propType=null,e.propState=s.MOVEING,e.isCircle=!1,e.circleCount=0,e}return i(e,t),e.prototype.onLoad=function(){this.dir=this.getRandomDir(),this.dirInterval(),this.safePosX=this.node.parent.width/2-500,this.safePosY=this.node.parent.height/2-500},e.prototype.AutoMove=function(t){var e=this.isNearWall(this.node.position);if(e!=a.Normal){var o=cc.misc.degreesToRadians(10),n=this.dir,i=cc.v2(n).rotate(o);this.dir=cc.v3(i.x,i.y),this.correctPropsPos(e)}this.isCircle=!1,this.circleCount=0;var r=this.dir.mul(this.speed*t),s=this.node.position.add(r);this.node.setPosition(s);var c=180*cc.v2(1,0).signAngle(cc.v2(this.dir.x,this.dir.y))/Math.PI-90;this.node.angle=c},e.prototype.initPorps=function(t){this.propType=t,this.initView(t),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.name="Props_"+c.PropsNameList[t],this.propState=s.MOVEING},e.prototype.initView=function(t){this.view_prop.spriteFrame=this.viewList_props[t]},e.prototype.removeProp=function(t,e){this.propState!=s.EATED&&(null!=this.propType&&cc.systemEvent.emit("onSnakeEatAbsorb",this.propType,t,e),this.propState=s.EATED,l.default.getInstance().PorpsNodePool.put(this.node))},e.prototype.correctPropsPos=function(){this.isCircle||(this.circleCount++,this.circleCount>120&&(this.isCircle=!0,this.dir=cc.v3(0,0,0).sub(this.dir)))},e.prototype.isNearWall=function(t){return Math.abs(t.x)<this.safePosX&&Math.abs(t.y)<this.safePosY?a.Normal:t.x>this.safePosX&&t.x>=0&&t.y<this.safePosY&&t.y>=0?a.Right:t.x>this.safePosX&&t.x>=0&&t.y>this.safePosY&&t.y>=0?a.RightTop:t.x>this.safePosX&&t.x>=0&&t.y>-this.safePosY&&t.y<0?a.Right:t.x>this.safePosX&&t.x>=0&&t.y<-this.safePosY&&t.y<0?a.RightBottom:t.x<-this.safePosX&&t.x<0&&t.y<this.safePosY&&t.y>=0?a.Left:t.x<-this.safePosX&&t.x<0&&t.y>this.safePosY&&t.y>=0?a.LeftTop:t.x<-this.safePosX&&t.x<0&&t.y>-this.safePosY&&t.y<0?a.Left:t.x<-this.safePosX&&t.x<0&&t.y<-this.safePosY&&t.y<0?a.LeftBottm:void 0},e.prototype.getRandomDir=function(){var t=[cc.v3(1,0,0),cc.v3(-1,0,0),cc.v3(0,1,0),cc.v3(0,-1,0),cc.v3(1,-1,0),cc.v3(1,1,0),cc.v3(-1,-1,0),cc.v3(-1,1,0)];return t[Math.floor(Math.random()*t.length)]},e.prototype.dirRandomChange=function(){this.dir=this.getRandomDir()},e.prototype.dirInterval=function(){this.dirTimer=setInterval(this.dirRandomChange.bind(this),3e3)},e.prototype.updateRenderFrame=function(t){this.AutoMove(t)},r([d(cc.Sprite)],e.prototype,"view_prop",void 0),r([d([cc.SpriteFrame])],e.prototype,"viewList_props",void 0),r([h],e)}(cc.Component);o.BaseProp=u,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr"}],BaseSnake:[function(t,e,o){"use strict";cc._RF.push(e,"0fdfdPH6spMHKtdubdL9yas","BaseSnake");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Dir=void 0;var a,s=t("../Constant"),c=t("../Manager/NodePoolMgr"),l=t("../Utils/Decimal"),p=t("../Utils/SnakeUtils"),h=t("./ShieldCtr"),d=cc._decorator,u=d.property,f=d.ccclass,y=new l.Decimal((1e3/s.RENDER_FRAME_DT).toFixed(3)),g=new l.Decimal((1e3/s.LOGIC_FRAME_DT).toFixed(3));(function(t){t[t.Normal=0]="Normal",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Bottom=3]="Bottom",t[t.Top=4]="Top",t[t.LeftBottm=5]="LeftBottm",t[t.LeftTop=6]="LeftTop",t[t.RightBottom=7]="RightBottom",t[t.RightTop=8]="RightTop"})(a=o.Dir||(o.Dir={}));var _=function(){function t(){this.skinList=[]}return r([u({displayName:"skinList",type:cc.SpriteFrame})],t.prototype,"skinList",void 0),r([f("Skin")],t)}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab_deathBody=null,e.prefab_body=null,e.prefab_effect_speedUp=null,e.prefab_userInfo=null,e.prefab_shield=null,e.collider_role=null,e.skin=[],e._renderFrame=y,e._logicFrame=g,e._speed=s.SNAKE_SPEED,e._dir=null,e.safePosX=0,e.safePosY=0,e._snakeArray=[],e.pointsArray=[],e.bodyLength=0,e.sectionLen=50,e.recordLength=0,e.headPointsNum=0,e._mulTimes=1,e.snakeProps=s.SnakeProps.None,e.snakeMoveState=s.SnakeMoveState.Normal,e.snakeStatus=s.SnakeStatus.Alive,e.snakeType=null,e.snakeId=null,e._all_collider=[],e.mapNode=null,e.skinType=0,e.userInfo=null,e.effectInterval=null,e.absorbArea=s.AbsorbArea.Normal,e.isCircle=!1,e.circleCount=0,e.isCheckCollider=!1,e.checkInterval=null,e.shieldCtrl=null,e.middlleIndex=null,e.hasShield=!1,e.checkLevel=1,e.killNumber=0,e}return i(e,t),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnakeArray",{get:function(){return this._snakeArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BodyLen",{get:function(){return this.bodyLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SectionLen",{get:function(){return this.sectionLen},set:function(t){this.sectionLen=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnakeId",{get:function(){return this.snakeId=0,this.snakeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AllCollider",{get:function(){return this._all_collider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"QuadCollision",{get:function(){return this._quadCollision},set:function(t){this._quadCollision=t},enumerable:!1,configurable:!0}),e.prototype.getRandomDir=function(){var t=cc.Vec2.random(new cc.Vec2);return cc.v3(t.x,t.y,0)},e.prototype.setIntervalLevel=function(t){this.checkLevel=t},e.prototype.setCheckColliderInterval=function(){var t=this;this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=setInterval(function(){t.isCheckCollider=!t.isCheckCollider},1e3*this.checkLevel)},e.prototype.randomColor=function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),o=Math.round(255*Math.random());return new cc.Color(t,e,o)},e.prototype.changeZIndex=function(){for(var t=0;t<this._snakeArray.length;t++)this._snakeArray[t].zIndex=s.SNAKE_MAX_LENGTH-t},e.prototype.getRotationByVector=function(t){if(0!=t.x||0!=t.y)return 180*cc.v2(1,0).signAngle(t)/Math.PI-90},e.prototype.rotateHead=function(t){if(0!=t.x||0!=t.y){var e=180*cc.v2(1,0).signAngle(t)/Math.PI-90;this.node.angle=e}},e.prototype.initSnake=function(t,e,o){this.dir=this.getRandomDir(),this.sectionLen=e,this.bodyLength=t,this.node.position=p.SnakeUtilMgr.getInstance().getRandomPos(1500,-1500),this._snakeArray.push(this.node),this.rotateHead(this.node.position),"number"==typeof o&&this.setSnakeId(o),this.safePosX=this.node.parent.width/2-150,this.safePosY=this.node.parent.height/2-150;for(var n=1;n<=this.bodyLength;n++)this.addNewBody();this.changeZIndex()},e.prototype.initSnakeNew=function(t,e,o,n){this.dir=this.getRandomDir(),this.sectionLen=e,this.bodyLength=t,"number"==typeof o&&this.setSnakeId(o),this.rotateHead(this.node.position),this.safePosX=this.node.parent.width/2-150,this.safePosY=this.node.parent.height/2-150,n&&(this.node.position=n),this._snakeArray.push(this.node);for(var i=1;i<=this.bodyLength;i++)this.addBodyToTail();this.changeZIndex()},e.prototype.setSnakeType=function(t){this.snakeType=t},e.prototype.setSnakeId=function(t){this.snakeId=t},e.prototype.onSnakeSpeedNormal=function(){this.snakeMoveState==s.SnakeMoveState.AddSpeed&&(this._speed=1*this._speed/this._mulTimes,this.snakeMoveState=s.SnakeMoveState.Normal,this.pointsArray=[],this.updateRecordPoints())},e.prototype.addNewBody=function(){var t=cc.instantiate(this.prefab_body);if(this._snakeArray.length>this.bodyLength?t.curIndex=this._snakeArray[this._snakeArray.length-1].curIndex:t.curIndex=0,1==this._snakeArray.length){var e=this.node.position.normalize();t.setPosition(this.node.position.sub(e.mul(this.sectionLen)))}else{var o=this._snakeArray[this._snakeArray.length-1];e=this._snakeArray[this._snakeArray.length-2].position.sub(o.position).normalize(),t.setPosition(o.position.sub(e.mul(this.sectionLen)))}t.color=this.node.color,t.scale=this.node.scale,t.getComponent(cc.Collider).tag=this.snakeId,t.script=this,this.node.parent.addChild(t),this._snakeArray.push(t),this.initRecordPoints()},e.prototype.addBodyToTail=function(){var t=this.getBodyInstance();t.curIndex=this._snakeArray[this._snakeArray.length-1].curIndex,this.getSnakeLength()%2==0?t.getComponent(cc.Sprite).spriteFrame=this.skin[this.skinType].skinList[0]:t.getComponent(cc.Sprite).spriteFrame=this.skin[this.skinType].skinList[1];var e=this._snakeArray[this._snakeArray.length-1].position;t.color=this.node.color,t.scale=this.node.scale,t.getComponent(cc.Collider).tag=this.snakeId,t.position=e,t.zIndex=s.SNAKE_MAX_LENGTH-this.getSnakeLength(),this.node.parent.addChild(t),t.script=this,this._snakeArray.push(t),this.updateTailPos()},e.prototype.getBodyInstance=function(){var t=c.default.getInstance().SnakeBodyNodePool;return t.size()>0?t.get():cc.instantiate(this.prefab_body)},e.prototype.removeBodyFromTail=function(){var t=this._snakeArray.pop();c.default.getInstance().SnakeBodyNodePool.put(t),this.pointsArray=[],this.updateRecordPoints(),this.updateSnakeMiddleIndex()},e.prototype.initRecordPoints=function(){this.addBodyPointArray(),this.recordLength=this.pointsArray.length},e.prototype.updateRecordPoints=function(){this.updateCurrentPointArray(),this.recordLength=this.pointsArray.length},e.prototype.updateTailPos=function(){for(var t=this._snakeArray.length-1,e=0;e<this.sectionLen;){e+=this._speed*this._renderFrame.toNumber()/1e3;var o=this._snakeArray[t-1],n=this._snakeArray[t].position.sub(o.position).normalize(),i=o.position.add(n.mul(e));this.pointsArray.unshift(i)}},e.prototype.updateCurrentPointArray=function(){for(var t=1;t<this._snakeArray.length;t++)for(var e=0;e<this.sectionLen;){e+=this._speed*this._renderFrame.toNumber()/1e3;var o=this._snakeArray[t-1],n=this._snakeArray[t].position.sub(o.position).normalize(),i=o.position.add(n.mul(e));this.pointsArray.unshift(i)}},e.prototype.addBodyPointArray=function(){for(var t=0,e=0;t<this.sectionLen;){t+=this._speed*this._renderFrame.toNumber()/1e3;var o=this._snakeArray[this._snakeArray.length-1],n=this._snakeArray[this._snakeArray.length-2].position.sub(o.position).normalize(),i=o.position.add(n.mul(t));this.pointsArray.splice(e,0,i),e+=1}},e.prototype.move=function(t){if(this.snakeStatus!=s.SnakeStatus.Death){this.rotateHead(this.dir),this.node.setPosition(this.node.position.add(this.dir.normalize().mul(this._speed*t))),this.pointsArray.push(this.node.position),this.headPointsNum+=1;for(var e=1;e<this._snakeArray.length;e++){var o,n,i=Math.floor((this.pointsArray.length-this.headPointsNum)/(this._snakeArray.length-1)*(this._snakeArray.length-1-e)),r=this.pointsArray[i],a=this._snakeArray[e-1].position,c=a.sub(r).mag();o=a.sub(r),n=c<=this.sectionLen?a.sub(a.sub(r).normalize().mul(c)):a.sub(a.sub(r).normalize().mul(this.sectionLen)),this._snakeArray[e].setPosition(n);var l=this.getRotationByVector(o);this._snakeArray[e].angle=l}this.pointsArray.length>this.recordLength&&(this.pointsArray.splice(0,1),this.headPointsNum-=1)}},e.prototype.setMapNode=function(t){this.mapNode=t},e.prototype.refreshAllCollider=function(){this._all_collider=[],this._all_collider=this.mapNode.getComponentsInChildren(cc.Collider)},e.prototype.isNearWall=function(t){return Math.abs(t.x)<this.safePosX&&Math.abs(t.y)<this.safePosY?a.Normal:t.x>this.safePosX&&t.x>=0&&t.y<this.safePosY&&t.y>=0?a.Right:t.x>this.safePosX&&t.x>=0&&t.y>this.safePosY&&t.y>=0?a.RightTop:t.x>this.safePosX&&t.x>=0&&t.y>-this.safePosY&&t.y<0?a.Right:t.x>this.safePosX&&t.x>=0&&t.y<-this.safePosY&&t.y<0?a.RightBottom:t.x<-this.safePosX&&t.x<0&&t.y<this.safePosY&&t.y>=0?a.Left:t.x<-this.safePosX&&t.x<0&&t.y>this.safePosY&&t.y>=0?a.LeftTop:t.x<-this.safePosX&&t.x<0&&t.y>-this.safePosY&&t.y<0?a.Left:t.x<-this.safePosX&&t.x<0&&t.y<-this.safePosY&&t.y<0?a.LeftBottm:Math.abs(t.x)<this.safePosX&&t.y<-this.safePosY&&t.y<0?a.Bottom:Math.abs(t.x)<this.safePosX&&t.y>this.safePosY&&t.y>0?a.Top:void 0},e.prototype.autoChooseMoveDir=function(){if(this.isNearWall(this.node.position)!==a.Normal){var t=cc.misc.degreesToRadians(15),e=this.dir,o=cc.v2(e).rotate(t);return this.dir=cc.v3(o.x,o.y),void(this.isCircle||(this.circleCount++,this.circleCount>120&&(this.isCircle=!0,this.dir=cc.v3(0,0,0).sub(this.dir))))}this.isCircle=!1,this.circleCount=0},e.prototype.updateAbsorbArea=function(){this.absorbArea=s.AbsorbArea.Strong},e.prototype.hideSnake=function(){for(var t=this._snakeArray.length-1;t>=0;t--)this._snakeArray[t].removeFromParent()},e.prototype.removeSnakeNode=function(){for(var t=c.default.getInstance().SnakeBodyNodePool,e=this._snakeArray.length-1;e>=0;e--){var o=this._snakeArray[e];"Collider_DeathBody"==o.name?t.put(o):o.destroy()}},e.prototype.snakeBornProtect=function(){this.addShiled(),this.updateSnakeMiddleIndex(),this.updateShieldPos(),this.updateShieldScale(),this.setShieldPersistTime(s.SHIELD_PERSIST_BORN)},e.prototype.addShiled=function(){this.hasShield=!0;var t=cc.instantiate(this.prefab_shield);t.parent=this.mapNode,this.shieldCtrl=t.getComponent(h.default),this.shieldCtrl.setTarget(this)},e.prototype.updateShieldScale=function(){if(this.shieldCtrl&&this.hasShield){var t=this._snakeArray.length+6;this.shieldCtrl.updateNodeScale(t*this.sectionLen)}},e.prototype.updateShieldPos=function(){this.shieldCtrl&&this.hasShield&&(this.shieldCtrl.node.position=this._snakeArray[this.middlleIndex].position)},e.prototype.updateSnakeMiddleIndex=function(){var t=Math.floor(this._snakeArray.length/2);this.middlleIndex=t},e.prototype.setShieldPersistTime=function(t){this.shieldCtrl.setPersistentTime(t),this.shieldCtrl.circleInterval()},e.prototype.getSnakeLength=function(){return this.SnakeArray.length},e.prototype.addSecitonLen=function(){this.sectionLen+=.1},e.prototype.reduceSectionLen=function(){this.sectionLen<=s.SNAKE_GAP_MIN||(this.sectionLen-=.1)},e.prototype.setSnakeSkinType=function(t){this.skinType=t},e.prototype.hideUserInfo=function(){this.userInfo&&(this.userInfo.destroy(),this.userInfo=null)},e.prototype.resetSnake=function(){this.snakeMoveState=s.SnakeMoveState.Normal,this._speed=s.SNAKE_SPEED},e.prototype.showSnake=function(){for(var t=0,e=this._snakeArray.length;t<e;t++){var o=this._snakeArray[t];o.active=!0,o.position=cc.v3(0,0,0),o.scale=1}},e.prototype.addKillNumber=function(){this.killNumber+=1,this.snakeType==s.SnakeType.Self&&cc.systemEvent.emit("onPlayerKillSnake",this.killNumber)},e.prototype.getKillNumber=function(){return this.killNumber},r([u(cc.Prefab)],e.prototype,"prefab_deathBody",void 0),r([u(cc.Prefab)],e.prototype,"prefab_body",void 0),r([u(cc.Prefab)],e.prototype,"prefab_effect_speedUp",void 0),r([u(cc.Prefab)],e.prototype,"prefab_userInfo",void 0),r([u(cc.Prefab)],e.prototype,"prefab_shield",void 0),r([u(cc.Collider)],e.prototype,"collider_role",void 0),r([u(_)],e.prototype,"skin",void 0),e}(cc.Component);o.default=v,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr","../Utils/Decimal":"Decimal","../Utils/SnakeUtils":"SnakeUtils","./ShieldCtr":"ShieldCtr"}],CollisionCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"93f62syDzRGt601Ve+CWPQ8","CollisionCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Utils/QuadtreeCollision"),i=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"CustomQuadCollision",{get:function(){return this._quadCollision},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"QuadCollision",{get:function(){return this._quad},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.initCollider=function(t){this._quad=new n.default(t.getBoundingBoxToWorld()),this._quad.updateTree(t)},t.prototype.clearQuadCollision=function(){this._quad.clear()},t._instance=null,t}();o.default=i,cc._RF.pop()},{"../Utils/QuadtreeCollision":"QuadtreeCollision"}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"6999abFledJ5YiBh6Z9usAB","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.LANGUAGE_TYPE=o.GameMode=o.GameState=o.SnakeType=o.SKININFO=o.SNAKE_TIMES=o.SNAKE_SPEED=o.LOGIC_FRAME_DT=o.RENDER_FRAME_DT=o.SHIELD_PERSIST_BORN=o.SHIELD_PERSIST_TIME=o.MAX_SNAKE_SCALE=o.SNAKE_SCALE=o.SNAKE_STRONG_LENGHT=o.FRESH_OBSTACLE_NUMBER=o.FRESH_PROP_NUMBER=o.FRESH_COIN_NUMBER=o.PropsDuration=o.FoodMoveSpeed=o.FOOD_DROP_LENGTH=o.SNAKE_MIN_LENGTH=o.SNAKE_MAX_LENGTH=o.SNAKE_GAP_MIN=o.SNAKE_ABSORB_MAX_AREA=o.ABSORB_AREA=o.ABSORB_DURATION=o.ABSORB_ORIGIN_AREA=o.AbsorbArea=o.SnakeProps=o.PropsNameList=o.PorpsType=o.SnakeStatus=o.SnakeMoveState=void 0,function(t){t[t.Normal=1]="Normal",t[t.AddSpeed=2]="AddSpeed"}(o.SnakeMoveState||(o.SnakeMoveState={})),function(t){t[t.Alive=1]="Alive",t[t.Death=2]="Death"}(o.SnakeStatus||(o.SnakeStatus={})),function(t){t[t.Coin=0]="Coin",t[t.Rocket=1]="Rocket",t[t.Shield=2]="Shield",t[t.Absorb=3]="Absorb",t[t.Mushroom=4]="Mushroom"}(o.PorpsType||(o.PorpsType={})),o.PropsNameList=["Coin","Rocket","Shield","Absorb","Mushroom"],function(t){t[t.Rocket=1]="Rocket",t[t.Shield=2]="Shield",t[t.Absorb=3]="Absorb",t[t.Mushroom=4]="Mushroom",t[t.None=5]="None"}(o.SnakeProps||(o.SnakeProps={})),function(t){t[t.Normal=100]="Normal",t[t.Strong=300]="Strong"}(o.AbsorbArea||(o.AbsorbArea={})),o.ABSORB_ORIGIN_AREA=50,o.ABSORB_DURATION=15,o.ABSORB_AREA=150,o.SNAKE_ABSORB_MAX_AREA=100,o.SNAKE_GAP_MIN=20,o.SNAKE_MAX_LENGTH=150,o.SNAKE_MIN_LENGTH=6,o.FOOD_DROP_LENGTH=50,o.FoodMoveSpeed=1e3,o.PropsDuration=10,o.FRESH_COIN_NUMBER=100,o.FRESH_PROP_NUMBER=10,o.FRESH_OBSTACLE_NUMBER=10,o.SNAKE_STRONG_LENGHT=10,o.SNAKE_SCALE=1.5,o.MAX_SNAKE_SCALE=2,o.SHIELD_PERSIST_TIME=15,o.SHIELD_PERSIST_BORN=5,o.RENDER_FRAME_DT=60,o.LOGIC_FRAME_DT=10,o.SNAKE_SPEED=300,o.SNAKE_TIMES=2,o.SKININFO={JOKER:{name:"body_joker",setionLen:50,scale:1}},function(t){t[t.Self=0]="Self",t[t.Other=1]="Other"}(o.SnakeType||(o.SnakeType={})),function(t){t[t.Connecting=0]="Connecting",t[t.Reconnect=1]="Reconnect",t[t.Playing=2]="Playing",t[t.Observe=3]="Observe",t[t.Pause=4]="Pause",t[t.End=5]="End",t[t.Over=6]="Over"}(o.GameState||(o.GameState={})),function(t){t[t.Gold=0]="Gold",t[t.Unlimited=1]="Unlimited",t[t.Practice=2]="Practice"}(o.GameMode||(o.GameMode={})),o.LANGUAGE_TYPE=cc.Enum({EN:"en",ARAB:"ar"}),cc._RF.pop()},{}],CustomQuatdtreeCollision:[function(t,e,o){"use strict";function n(t,e,o,n){this.max_objects=e||10,this.max_levels=o||4,this.level=n||0,this.bounds=t,this.objects=[],this.nodes=[]}cc._RF.push(e,"06908gOjSRJ34/FJZogP7ht","CustomQuatdtreeCollision"),Object.defineProperty(o,"__esModule",{value:!0}),n.prototype.split=function(){var t=this.level+1,e=this.bounds.width/2,o=this.bounds.height/2,i=this.bounds.x,r=this.bounds.y;this.nodes[0]=new n({x:i+e,y:r,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[1]=new n({x:i,y:r,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[2]=new n({x:i,y:r+o,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[3]=new n({x:i+e,y:r+o,width:e,height:o},this.max_objects,this.max_levels,t)},n.prototype.getIndex=function(t){var e=[],o=this.bounds.x+this.bounds.width/2,n=this.bounds.y+this.bounds.height/2,i=t.y<n,r=t.x<o,a=t.x+t.width>o,s=t.y+t.height>n;return i&&a&&e.push(0),r&&i&&e.push(1),r&&s&&e.push(2),a&&s&&e.push(3),e},n.prototype.insert=function(t){var e,o=0;if(this.nodes.length)for(e=this.getIndex(t),o=0;o<e.length;o++)this.nodes[e[o]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),o=0;o<this.objects.length;o++){e=this.getIndex(this.objects[o]);for(var n=0;n<e.length;n++)this.nodes[e[n]].insert(this.objects[o])}this.objects=[]}},n.prototype.retrieve=function(t){var e=this.getIndex(t),o=this.objects;if(this.nodes.length)for(var n=0;n<e.length;n++)o=o.concat(this.nodes[e[n]].retrieve(t));return o=o.filter(function(t,e){return o.indexOf(t)>=e})},n.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]};var i=function(){function t(t){this._tree=null,this._tree=new n(t)}return t.prototype.updateTree=function(t){if(this._tree){this._tree.clear();for(var e=t.children,o=0,n=e.length;o<n;o++){var i=e[o];i.name.startsWith("Collider_")&&this._tree.insert(i)}}},t.prototype.check=function(t){var e={retrieve:[],contacts:[]};return this._tree.retrieve(t).forEach(function(o){var n,i,r,a,s,c,l,p,h,d,u,f;e.retrieve.push(o),i=t,(n=o).uuid!==i.uuid&&(a=i,s=(r=n).x,c=r.y,l=r.x+r.width*r.scale,p=r.y+r.height*r.scale,h=a.x,d=a.y,u=a.x+a.width*a.scale,f=a.y+a.height*a.scale,s<=u&&l>=h&&c<=f&&p>=d)&&e.contacts.push(o)}),e},t.prototype.clear=function(){this._tree.clear(),this._tree=null},t}();o.default=i,cc._RF.pop()},{}],DeathBody:[function(t,e,o){"use strict";cc._RF.push(e,"ab731L8GQZHnq8vDYCZS6j8","DeathBody");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Food"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initDeathBody=function(t){this.coinValue=t,this.init()},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./Food":"Food"}],Decimal:[function(t,e,o){"use strict";cc._RF.push(e,"0dcf6lmqPNALIaYxXIdpl3i","Decimal"),Object.defineProperty(o,"__esModule",{value:!0}),o.Decimal=void 0;var n=3,i=Math.pow(10,n),r=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.sign=1,this.v1=0,this.v2=0,3!==t.length){if(0!==t.length&&1===t.length)if("number"==typeof t[0]){if(-1!==t[0].toString().indexOf("."))throw new Error("Decimal need an int number -- "+t[0]);t[0]>=0?(this.sign=1,this.v1=t[0]):(this.sign=-1,this.v1=-t[0])}else{if(0===t[0].length)return;var o=t[0].split(".");this.sign="-"===o[0][0]?-1:1,this.v1=parseInt(o[0]),-1===this.sign&&(this.v1=-this.v1),o[1]&&(this.v2=parseInt(s(o[1]))),0===this.v1&&0===this.v2&&(this.sign=1)}}else{if(this.sign=t[0],this.v1=t[1],this.v2=t[2],this.v2>=i)throw new Error("Decimal v2 too big -- "+this.v2);0===this.v1&&0===this.v2&&(this.sign=1)}}return Object.defineProperty(t,"ZERO",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ZERO_R",{get:function(){return a},enumerable:!1,configurable:!0}),t.prototype.toNumber=function(){return this.sign*(this.v1+this.v2/i)},t.prototype.toString=function(){return 1===this.sign?this.v1.toString()+"."+"0".repeat(n-this.v2.toString().length)+this.v2:"-"+this.v1.toString()+"."+"0".repeat(n-this.v2.toString().length)+this.v2},t.prototype.getHugeValue=function(){return this.sign*(this.v1*i+this.v2)},t.prototype.clone=function(){return new t(this.sign,this.v1,this.v2)},t.prototype.floor=function(){return this.sign*this.v1},t.prototype.ceil=function(){return this.sign*(this.v1+(this.v2>0?1:0))},t.prototype.round=function(){return this.sign*(this.v1+(this.v2>i>>1?1:0))},t.prototype.reverse=function(){return new t(-this.sign,this.v1,this.v2)},t.prototype.add=function(e){var o=this.getHugeValue()+e.getHugeValue(),n=1;o<0&&(n=-1,o=-o);var r=c(o,i);return new t(n,r.shang,r.yu)},t.prototype.addSelf=function(t){var e=this.add(t);return this.sign=e.sign,this.v1=e.v1,this.v2=e.v2,this},t.prototype.sub=function(t){return this.add(t.reverse())},t.prototype.subSelf=function(t){var e=this.sub(t);return this.sign=e.sign,this.v1=e.v1,this.v2=e.v2,this},t.prototype.mul=function(e){var o=this.v1*e.v1,n=c(this.v1*e.v2,i),r=c(this.v2*e.v1,i),a=c(this.v2*e.v2,i),s=new t(1,o,0).addSelf(new t(1,n.shang,n.yu)).addSelf(new t(1,r.shang,r.yu)).addSelf(new t(1,0,a.shang));return new t(this.sign===e.sign?1:-1,s.v1,s.v2)},t.prototype.mulSelf=function(t){var e=this.mul(t);return this.sign=e.sign,this.v1=e.v1,this.v2=e.v2,this},t.prototype.div=function(e){var o=e.v1*i+e.v2;if(0===o)throw new Error("Decimal div has a zero number");var n=c(this.v1*i+this.v2,o),r=c(n.yu*i,o);return new t(this.sign===e.sign?1:-1,n.shang,r.shang)},t.prototype.divSelf=function(t){var e=this.div(t);return this.sign=e.sign,this.v1=e.v1,this.v2=e.v2,this},t.prototype.LT=function(t){return this.getHugeValue()<t.getHugeValue()},t.prototype.LE=function(t){return this.getHugeValue()<=t.getHugeValue()},t.prototype.EQ=function(t){return this.getHugeValue()===t.getHugeValue()},t.prototype.NE=function(t){return this.getHugeValue()!==t.getHugeValue()},t.prototype.GT=function(t){return this.getHugeValue()>t.getHugeValue()},t.prototype.GE=function(t){return this.getHugeValue()>=t.getHugeValue()},t.prototype.max=function(t){return this.GT(t)?this:t},t.prototype.min=function(t){return this.LT(t)?this:t},t}();o.Decimal=r;var a=new r;function s(t,e){void 0===e&&(e=n);var o=t.length;return o===e?t:o>e?t.substr(0,e):t+"0".repeat(e-o)}function c(t,e){if(t<e)return{shang:0,yu:t};if(t===e)return{shang:1,yu:0};var o=Math.floor(t/e)-1;for(t-=e*o;t>=e;)o+=1,t-=e;return{shang:o,yu:t}}cc._RF.pop()},{}],DialogGameEndCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"38195MZN2lKhpZ3lIRih5XT","DialogGameEndCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.DialogType=void 0;var a,s,c=t("../Constant"),l=t("../Lang/index"),p=t("../../../../Script/Utils/utils_common"),h=t("../../../../Script/Managers/GameMgr"),d=t("../../../../Script/msg/GetSnakeGameResultMsg"),u=t("../SnakeDataMgr"),f=t("../../../../Script/DataHandler/MsgDispatcher"),y=t("../../../../Script/Managers/Logger"),g=t("../../../../Script/Managers/NetMgr"),_=t("../../../../Script/DataHandler/MsgCmdConstant"),v=t("../../../../Script/msg/SingleGameUsePropMsg"),m=t("../../../../Script/msg/GetSnakeGameRankMsg"),S=t("../Prefab/item/item_settleRank"),k=t("../../../../Script/Utils/App_connect"),b=t("../../../../Script/msg/SingleGameStatusMsg"),C=t("../Utils/SnakeUtils"),P=cc._decorator,M=P.ccclass,A=P.property;(function(t){t[t.en=0]="en",t[t.ar=1]="ar"})(a||(a={})),function(t){t[t.KeepPlay=0]="KeepPlay",t[t.Quit=1]="Quit"}(s=o.DialogType||(o.DialogType={}));var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_rank_title=null,e.text_describe_kill=null,e.text_kill_number=null,e.text_describe_rank=null,e.text_rank_number=null,e.text_length_number=null,e.text_lengt_number_shadow=null,e.sprite_length=null,e.viewList_length=[],e.myRankInfo=null,e.prefab_item_settle=null,e.node_rank_container=null,e.text_number_revive=null,e.node_revive=null,e.node_exit=null,e.node_share=null,e.node_continue=null,e.text_describe_quit=null,e.text_describe_revive=null,e.text_describe_keepPlay=null,e.actFlag=!1,e.myRank=0,e.topFiveList=[],e}return i(e,t),e.prototype.onLoad=function(){this.addSocketEventListener()},e.prototype.onDestroy=function(){this.removeSocketEventListener()},e.prototype.start=function(){},e.prototype.addSocketEventListener=function(){cc.systemEvent.on("getShareGame",this.onGetShareGame,this);var t=g.NetMgr.getInstance().getNet();t.addResponeHandler(_.MsgCmdConstant.MSG_SINGLE_GAME_USE_PROP_ACK,this.onUsePropMsgAck,this),t.addResponeHandler(_.MsgCmdConstant.MSG_GET_SNAKE_GAME_RANK_ACK,this.onGetSnakeRankMsgAck,this)},e.prototype.removeSocketEventListener=function(){cc.systemEvent.off("getShareGame",this.onGetShareGame,this);var t=g.NetMgr.getInstance().getNet();t.removeResponeHandler(_.MsgCmdConstant.MSG_SINGLE_GAME_USE_PROP_ACK,this.onUsePropMsgAck,this),t.removeResponeHandler(_.MsgCmdConstant.MSG_GET_SNAKE_GAME_RANK_ACK,this.onGetSnakeRankMsgAck,this)},e.prototype.onUsePropMsgAck=function(t){y.Logger.logNet(t,"\u4f7f\u7528\u9053\u5177\u56de\u8c03");var e=t.propJson,o=JSON.parse(e);h.default.getInstance().Props=o,cc.systemEvent.emit("onPlayerRevive")},e.prototype.sendUsePorpMsg=function(){var t=new v.SingleGameUsePropMsg,e=h.default.getInstance();t.propId=e.Props.id,t.type=2,t.tableId=e.TableId,f.MsgDispatcher.sendMsg(t)},e.prototype.onShareRevive=function(){k.openShare(JSON.stringify({content:"\u8d2a\u5403\u86c7\u7684\u6e38\u620f",url:"https://www.baidu.com/",title:"\u8d2a\u5403\u86c7\u5206\u4eab",image:"https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png",type:"1",internal:"1",ext:"test"}))},e.prototype.onGetShareGame=function(){cc.systemEvent.emit("onPlayerRevive"),C.SnakeUtilMgr.getInstance().setFirstRevive()},e.prototype.sendGetSnakeRankMsg=function(){var t=new m.GetSnakeGameRankMsg,e=h.default.getInstance();t.gameId=e.GameId,t.tableId=e.TableId,t.pageNum=1,t.pageSize=100,y.Logger.logNet(t,"\u83b7\u53d6\u6392\u884c\u699c\u4fe1\u606f"),f.MsgDispatcher.sendMsg(t)},e.prototype.sendGameQuitStatus=function(){var t=new b.SingleGameStatusMsg,e=h.default.getInstance();t.userId=dcodeIO.Long.fromNumber(e.UserId),t.gameId=e.GameId,t.statusType=2,t.tableId=e.TableId,f.MsgDispatcher.sendMsg(t),y.Logger.logBusiness(t,"\u53d1\u9001\u6e38\u620f\u653e\u5f03\u72b6\u6001")},e.prototype.onGetSnakeRankMsgAck=function(t){y.Logger.logNet(t,"\u6392\u884c\u699c\u4fe1\u606f");var e=t.snakeRankItemList;this.myRank=this.getMyCurrentRank(e);var o=this.composeMyRankInfo(this.myRank);this.topFiveList=this.getTopFiveRank(e);var n=this.checkTopList(this.topFiveList,o);this.initSettleRank(n),this.initMyRankInfo(o),this.updateWeeklyRank(this.myRank)},e.prototype.initGameEndDialog=function(){var t=h.default.getInstance().Language==c.LANGUAGE_TYPE.ARAB?c.LANGUAGE_TYPE.ARAB:c.LANGUAGE_TYPE.EN,e=u.SnakeDataMgr.getInstance();this.updateKillNumber(e.Kill,t),this.updateSnakeLength(e.SnakeScore),"ar"==t?this.updateLengthDesribe(a.ar):this.updateLengthDesribe(a.en),this.updateDescribe(t)},e.prototype.jumpToIndexScene=function(){k.noticeAPPOpenCloseEffect("1"),cc.director.loadScene("Index")},e.prototype.reviveSnkaeByCoin=function(){},e.prototype.updateKillNumber=function(t){this.text_kill_number.string=t+"",this.text_kill_number._forceUpdateRenderData()},e.prototype.updateWeeklyRank=function(t){this.text_rank_number.string=t>100?"100+":t},e.prototype.updateSnakeLength=function(t){this.text_length_number.string=t.toLocaleString("en-US"),this.text_lengt_number_shadow.string=t.toLocaleString("en-US")},e.prototype.updateLengthDesribe=function(t){t==a.ar?this.sprite_length.spriteFrame=this.viewList_length[0]:this.sprite_length.spriteFrame=this.viewList_length[1]},e.prototype.updateDescribe=function(t){var e=l.language[t].exitGame;this.text_describe_quit.string=e;var o=l.language[t].resurrect;this.text_describe_revive.string=o;var n=l.language[t].continueGame;this.text_describe_keepPlay.string=n,this.text_describe_kill.string=l.language[t].kill,this.text_describe_rank.string=l.language[t].previewRank,this.text_rank_title.string=l.language[t].Ranking},e.prototype.updateSnakeReviveCoinNumber=function(){var t=this,e=h.default.getInstance().Props;if(e.buyNum>=5)return this.node_revive.active=!1,void setTimeout(function(){t.node_exit.x=0});var o=e.prices[e.buyNum];this.text_number_revive.string=o+""},e.prototype.updatePreviewRank=function(t,e){var o=p.handleTranslate(t,l.language[e].previewRank);this.text_describe_rank.string=o,this.text_describe_rank._forceUpdateRenderData()},e.prototype.showGameEndDialog=function(t){if(this.node.active=!0,t==s.KeepPlay)this.node_exit.x=-177,this.node_continue.active=!0,this.node_revive.active=!1,this.node_share.active=!1;else{var e=C.SnakeUtilMgr.getInstance().getIsTodayFirstRevive();this.node_continue.active=!1,this.node_revive.active=!e,this.node_share.active=e,this.updateSnakeReviveCoinNumber()}this.initGameEndDialog(),this.submitPlayerScore(),this.sendGetSnakeRankMsg()},e.prototype.submitPlayerScore=function(){var t=new d.default;t.length=dcodeIO.Long.fromNumber(u.SnakeDataMgr.getInstance().SnakeScore),t.tableId=h.default.getInstance().TableId,y.Logger.logBusiness(t,"\u4e0a\u62a5\u5206\u6570"),f.MsgDispatcher.sendMsg(t)},e.prototype.hideGameEndDialog=function(){this.node.active=!1},e.prototype.handleRankList=function(t){for(var e=u.SnakeDataMgr.getInstance().SnakeScore,o=100,n=t.length-1;n>=0;n--)if(e<t[n].length.toNumber()){o=n+1;break}return o},e.prototype.getMyCurrentRank=function(t){for(var e=u.SnakeDataMgr.getInstance().SnakeScore,o=1,n=t.length-1;n>=0;n--)if(e<t[n].length.toNumber()){o=t[n].rankNo+1;break}return o},e.prototype.composeMyRankInfo=function(t){var e=h.default.getInstance(),o=u.SnakeDataMgr.getInstance();return{avatar:e.Player.headImageUrl,name:e.Player.playerName,length:dcodeIO.Long.fromNumber(o.SnakeScore),rankNo:t,userId:dcodeIO.Long.fromNumber(e.UserId)}},e.prototype.getTopFiveRank=function(t){return t.length<=5?t:t.slice(0,5)},e.prototype.initSettleRank=function(t){this.node_rank_container.removeAllChildren();for(var e=0,o=t.length;e<o;e++){var n=cc.instantiate(this.prefab_item_settle);n.scale=.9,n.parent=this.node_rank_container,n.getComponent(S.default).init(t[e])}},e.prototype.initMyRankInfo=function(t){var e;this.myRankInfo.children.length>0?e=this.myRankInfo.children[0]:(e=cc.instantiate(this.prefab_item_settle)).parent=this.myRankInfo;var o=e.getComponent(S.default);e.scale=.9,o.init(t),o.setPlayerStyle(t.rankNo),e.getComponent(cc.Sprite).enabled=!1},e.prototype.checkTopList=function(t,e){var o=!1,n=[];if(t.length<=0)return n.push(e),n;for(var i=0,r=t.length;i<r;i++){var a=t[i];a.userId.toNumber()==e.userId.toNumber()&&(o=!0,a.length.toNumber()<e.length.toNumber()&&(a.length=e.length))}return o&&(t.sort(function(t,e){return e.length.toNumber()-t.length.toNumber()}),n=t.map(function(t,e){return t.rankNo=e+1,t})),t},r([A(cc.Label)],e.prototype,"text_rank_title",void 0),r([A(cc.Label)],e.prototype,"text_describe_kill",void 0),r([A(cc.Label)],e.prototype,"text_kill_number",void 0),r([A(cc.Label)],e.prototype,"text_describe_rank",void 0),r([A(cc.Label)],e.prototype,"text_rank_number",void 0),r([A(cc.Label)],e.prototype,"text_length_number",void 0),r([A(cc.Label)],e.prototype,"text_lengt_number_shadow",void 0),r([A(cc.Sprite)],e.prototype,"sprite_length",void 0),r([A([cc.SpriteFrame])],e.prototype,"viewList_length",void 0),r([A(cc.Node)],e.prototype,"myRankInfo",void 0),r([A(cc.Prefab)],e.prototype,"prefab_item_settle",void 0),r([A(cc.Node)],e.prototype,"node_rank_container",void 0),r([A(cc.Label)],e.prototype,"text_number_revive",void 0),r([A(cc.Node)],e.prototype,"node_revive",void 0),r([A(cc.Node)],e.prototype,"node_exit",void 0),r([A(cc.Node)],e.prototype,"node_share",void 0),r([A(cc.Node)],e.prototype,"node_continue",void 0),r([A(cc.Label)],e.prototype,"text_describe_quit",void 0),r([A(cc.Label)],e.prototype,"text_describe_revive",void 0),r([A(cc.Label)],e.prototype,"text_describe_keepPlay",void 0),r([M],e)}(cc.Component);o.default=R,cc._RF.pop()},{"../../../../Script/DataHandler/MsgCmdConstant":void 0,"../../../../Script/DataHandler/MsgDispatcher":void 0,"../../../../Script/Managers/GameMgr":void 0,"../../../../Script/Managers/Logger":void 0,"../../../../Script/Managers/NetMgr":void 0,"../../../../Script/Utils/App_connect":void 0,"../../../../Script/Utils/utils_common":void 0,"../../../../Script/msg/GetSnakeGameRankMsg":void 0,"../../../../Script/msg/GetSnakeGameResultMsg":void 0,"../../../../Script/msg/SingleGameStatusMsg":void 0,"../../../../Script/msg/SingleGameUsePropMsg":void 0,"../Constant":"Constant","../Lang/index":"index","../Prefab/item/item_settleRank":"item_settleRank","../SnakeDataMgr":"SnakeDataMgr","../Utils/SnakeUtils":"SnakeUtils"}],DisplayArabAndEn:[function(t,e,o){"use strict";cc._RF.push(e,"26a43UwnJFJoLEinQLKjemq","DisplayArabAndEn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s,c,l,p=t("../Game/Constant"),h=t("../../../Script/Managers/GameMgr");(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(a||(a={})),function(t){t.isAbsoluteVerticalCenter="isAbsoluteVerticalCenter",t.isAlignBottom="isAlignBottom",t.isAlignHorizontalCenter="isAlignHorizontalCenter",t.isAlignLeft="isAlignLeft",t.isAlignRight="isAlignRight",t.isAlignTop="isAlignTop",t.isAlignVerticalCenter="isAlignVerticalCenter"}(s||(s={})),function(t){t.LEFT="left",t.RIGHT="right"}(c||(c={})),function(t){t[t.ARAB=0]="ARAB",t[t.EN=1]="EN"}(l||(l={}));var d=cc._decorator,u=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=0,e.originPos=c.LEFT,e.iconOffset=0,e.isNodeReverse=!1,e.isIconReverse=!1,e.iconOriginPos=c.LEFT,e.icon=null,e.viewTypeList=[],e}return i(e,t),e.prototype.updateNodeWidgetToRight=function(t,e){var o=t.getComponent(cc.Widget);if(!o)throw new Error("check the node, make sure the node have widget!");o[s.isAlignLeft]=!1,o[s.isAlignRight]=!0,o[a.RIGHT]=e,o.updateAlignment()},e.prototype.updateNodeWidgetToLeft=function(t,e){var o=t.getComponent(cc.Widget);if(!o)throw new Error("check the node, make sure the node have widget!");o[s.isAlignLeft]=!0,o[s.isAlignRight]=!1,o[a.LEFT]=e,o.updateAlignment()},e.prototype.nodeReverse=function(t,e){void 0===e&&(e=!1),t.scaleX=e?-1:1},e.prototype.initDisplay=function(){h.default.getInstance().Language==p.LANGUAGE_TYPE.ARAB?(this.arabDisplay(),this.updateNodeView(l.ARAB)):(this.normalDisplay(),this.updateNodeView(l.EN))},e.prototype.normalDisplay=function(){this.nodeReverse(this.node),this.originPos===c.LEFT?(this.updateNodeWidgetToLeft(this.node,this.offset),this.icon&&(this.iconOriginPos===c.LEFT?this.updateNodeWidgetToLeft(this.icon,this.iconOffset):this.updateNodeWidgetToRight(this.icon,this.iconOffset))):this.originPos===c.RIGHT&&(this.updateNodeWidgetToRight(this.node,this.offset),this.icon&&(this.iconOriginPos===c.LEFT?this.updateNodeWidgetToLeft(this.icon,this.iconOffset):this.updateNodeWidgetToRight(this.icon,this.iconOffset)))},e.prototype.arabDisplay=function(){this.isNodeReverse&&this.nodeReverse(this.node,this.isNodeReverse),this.originPos===c.LEFT?(this.updateNodeWidgetToRight(this.node,this.offset),this.icon&&(this.iconOriginPos===c.LEFT?this.updateNodeWidgetToRight(this.icon,this.iconOffset):this.updateNodeWidgetToLeft(this.icon,this.iconOffset),this.isIconReverse&&this.nodeReverse(this.icon,this.isIconReverse))):this.originPos===c.RIGHT&&(this.updateNodeWidgetToLeft(this.node,this.offset),this.icon&&(this.iconOriginPos===c.LEFT?this.updateNodeWidgetToRight(this.icon,this.iconOffset):this.updateNodeWidgetToLeft(this.icon,this.iconOffset),this.isIconReverse&&this.nodeReverse(this.icon,this.isIconReverse)))},e.prototype.updateNodeView=function(t){if(void 0===t&&(t=l.ARAB),this.viewTypeList.length>0){var e=this.node.getComponent(cc.Sprite);if(!e)return;e.spriteFrame=this.viewTypeList[t]}},e.prototype.onLoad=function(){this.initDisplay()},r([f],e.prototype,"offset",void 0),r([f],e.prototype,"originPos",void 0),r([f],e.prototype,"iconOffset",void 0),r([f],e.prototype,"isNodeReverse",void 0),r([f],e.prototype,"isIconReverse",void 0),r([f],e.prototype,"iconOriginPos",void 0),r([f(cc.Node)],e.prototype,"icon",void 0),r([f([cc.SpriteFrame])],e.prototype,"viewTypeList",void 0),r([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../Script/Managers/GameMgr":void 0,"../Game/Constant":"Constant"}],FoodLayerCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"2d0e0oS0+RPrY80CMgT/2iz","FoodLayerCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Manager/NodePoolMgr"),c=t("../Prefab/Food"),l=t("../SnakeDataMgr"),p=t("../Utils/SnakeUtils"),h=t("./BaseLayer"),d=cc._decorator,u=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab_food=null,e.prefab_body=null,e.camera_map=null,e.posMax=null,e}return i(e,t),e.prototype.onLoad=function(){this.posMax=Math.floor(this.node.width/2-200)},e.prototype.getFoodInstance=function(){var t=s.default.getInstance();return t.CoinNodePool.size()>0?t.CoinNodePool.get():cc.instantiate(this.prefab_food)},e.prototype.createFood=function(t){var e=this.getFoodInstance(),o=e.getComponent(c.default);o.init(),o.setFoodColor(),o.setFoodValue(10),e.position=t,e.parent=this.node},e.prototype.createRandomPos=function(){var t=Math.floor(-this.node.width/2+this.node.width*Math.random()),e=Math.floor(-this.node.height/2+this.node.height*Math.random());return cc.v3(t,e,0)},e.prototype._getItemGenerator=function(t){var e;return a(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<t?[4,this._initItem()]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype._putFoodToMapGenerator=function(t){var e,o,n;return a(this,function(i){switch(i.label){case 0:e=p.SnakeUtilMgr.getInstance(),o=e.getRandomPosList(t,this.posMax,-this.posMax),n=0,i.label=1;case 1:return n<t?[4,this.createFood(o[n])]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},e.prototype._snakeBodyGenerator=function(t){var e;return a(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<t?[4,this._initSnakeBody()]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype._initItem=function(){var t=cc.instantiate(this.prefab_food);s.default.getInstance().CoinNodePool.put(t)},e.prototype._initSnakeBody=function(){var t=cc.instantiate(this.prefab_body);s.default.getInstance().SnakeBodyNodePool.put(t)},e.prototype.putFoodToMap=function(t){this.executePreFrame(this._putFoodToMapGenerator(t),5)},e.prototype.hideOutSightFood=function(){},e.prototype.start=function(){p.SnakeUtilMgr.getInstance().Seed=l.SnakeDataMgr.getInstance().seed,this.executePreFrame(this._getItemGenerator(100),5),this.executePreFrame(this._snakeBodyGenerator(100),5)},r([f(cc.Prefab)],e.prototype,"prefab_food",void 0),r([f(cc.Prefab)],e.prototype,"prefab_body",void 0),r([f(cc.Camera)],e.prototype,"camera_map",void 0),r([u],e)}(h.default);o.default=y,cc._RF.pop()},{"../Manager/NodePoolMgr":"NodePoolMgr","../Prefab/Food":"Food","../SnakeDataMgr":"SnakeDataMgr","../Utils/SnakeUtils":"SnakeUtils","./BaseLayer":"BaseLayer"}],Food:[function(t,e,o){"use strict";cc._RF.push(e,"522d5MnpmJKc46njZlhbfzp","Food");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../Constant"),c=t("../Manager/NodePoolMgr"),l=t("../Manager/SoundManager"),p=t("./DeathBody"),h=t("./SnakeModeGold"),d=t("./SnakeModeUnlimited"),u=t("./SnakeModeUnlimitedPlayer"),f=cc._decorator,y=f.ccclass;f.property,function(t){t[t.STATIC=0]="STATIC",t[t.MOVEING=1]="MOVEING",t[t.EATED=2]="EATED"}(a||(a={}));var g=[cc.color(255,27,112),cc.color(239,61,253),cc.color(244,142,17),cc.color(27,112,254),cc.color(59,206,127),cc.color(255,235,148)],_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e.state=a.STATIC,e.point=cc.Vec3.ZERO,e.coinValue=1,e}return i(e,t),e.prototype.setTargetNode=function(t){this.state!=a.MOVEING&&(this.targetNode=t,this.state=a.MOVEING)},e.prototype.getState=function(){return this.state},e.prototype.update=function(t){this.state==a.MOVEING&&(this.targetNode.isValid?(this.node.position=this.node.position.add(this.targetNode.position.sub(this.node.position).normalize().mul(s.FoodMoveSpeed*t)),this.node.position.sub(this.targetNode.position).mag()<30&&(this.settle(),this.state=a.EATED)):this.state=a.STATIC)},e.prototype.init=function(){this.state=a.STATIC,this.targetNode=null},e.prototype.setFoodColor=function(){this.node.color=g[Math.floor(Math.random()*g.length)]},e.prototype.settle=function(){this.targetNode.getComponent(h.default)&&this.targetNode.getComponent(h.default).addOwnedCoinNumber(this.coinValue),this.targetNode.getComponent(d.default)&&(this.targetNode.getComponent(d.default).updateSnakeScore(this.coinValue),this.targetNode.getComponent(u.default)&&(this.node.getComponent(p.default)?l.default.getInstance().eatBigFoodEffect():l.default.getInstance().eatLittleFoodEffect())),this.node.getComponent(p.default)?c.default.getInstance().DeathBodyNodePool.put(this.node):c.default.getInstance().CoinNodePool.put(this.node)},e.prototype.setFoodValue=function(t){var e=t||1;this.coinValue=e},e.prototype.start=function(){},r([y],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr","../Manager/SoundManager":"SoundManager","./DeathBody":"DeathBody","./SnakeModeGold":"SnakeModeGold","./SnakeModeUnlimited":"SnakeModeUnlimited","./SnakeModeUnlimitedPlayer":"SnakeModeUnlimitedPlayer"}],GameGoldModeUiCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"1f074KFV2VO96FrtrBoy2Lh","GameGoldModeUiCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../Utils/Decimal"),p=t("../Constant"),h=t("./FoodLayerCtrl"),d=t("../Prefab/SnakeModeGoldRobot"),u=t("../JoyStick"),f=t("../Prefab/SnakeModeGoldPlayer"),y=t("./PlayerViewCameraCtrl"),g=t("../SpeedUp"),_=t("./PropsLayerCtrl"),v=t("../Prefab/BaseSnake"),m=new l.Decimal((1e3/p.RENDER_FRAME_DT).toFixed(3)),S=new l.Decimal((1e3/p.LOGIC_FRAME_DT).toFixed(3)),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Prefeb_Snake_Normal=null,e.Prefeb_Snake_Robot=null,e.Node_Map=null,e.joyStick=null,e.speedUpBtn=null,e.totalFrame=0,e.playerCameraCtrl=null,e.propsCtrl=null,e.player=null,e.SnakeList=[],e.AutoSnakeList=[],e._renderFrame=m.toNumber()/1e3,e._logicFrame=S.toNumber()/1e3,e.GameState=p.GameState.Playing,e.currViewSnake=null,e}return i(e,t),e.prototype.onLoad=function(){cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),this.playerCameraCtrl=this.node.getComponent(y.default),this.addEventListener()},e.prototype.onDestroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){cc.systemEvent.on("onGameEnd",this.onGameEnd,this),cc.systemEvent.on("onSnakeDeath",this.onSnakeDeath,this),cc.systemEvent.on("onSnakeEatProps",this.onSnakeEatProp,this)},e.prototype.removeEventListener=function(){cc.systemEvent.off("onGameEnd",this.onGameEnd,this),cc.systemEvent.off("onSnakeDeath",this.onSnakeDeath,this)},e.prototype.initGame=function(){var t=this;this.Node_Map.getComponent(h.default).putFoodToMap(100);for(var e=0;e<10;e++)this.initRobotSnake(e);this.initSelfSnake(1e3),setInterval(this.freshFood.bind(this),3e4),setTimeout(function(){t.freshProps()},1e3*(p.SHIELD_PERSIST_BORN+2))},e.prototype.onGameEnd=function(){this.joyStick.node.active=!1,this.speedUpBtn.node.active=!1,this.GameState=p.GameState.Observe;var t=this.getAliveSnakeView();t&&(this.currViewSnake=t.getComponent(v.default).SnakeId,this.playerCameraCtrl.setTargetNode(t))},e.prototype.onSnakeDeath=function(t,e){if(this.refreshSnakeCollision(),e==this.currViewSnake){var o=this.getAliveSnakeView();this.playerCameraCtrl.setTargetNode(o),this.currViewSnake=o.getComponent(v.default).SnakeId}},e.prototype.getAliveSnakeView=function(){for(var t=null,e=0;e<this.AutoSnakeList.length;e++)if(this.AutoSnakeList[e].getComponent(d.default).snakeStatus==p.SnakeStatus.Alive){t=e;break}return this.AutoSnakeList[t]},e.prototype.freshFood=function(){var t=this;this.Node_Map.getComponent(h.default).putFoodToMap(100),setTimeout(function(){t.refreshSnakeCollision()},1e3)},e.prototype.freshProps=function(){var t=this;this.Node_Map.getComponent(_.default).createProps(),setTimeout(function(){t.refreshSnakeCollision()},1e3)},e.prototype.refreshSnakeCollision=function(){for(var t=0;t<this.AutoSnakeList.length;t++){var e=this.AutoSnakeList[t];e.active&&e.getComponent(d.default).refreshAllCollider()}this.player.snakeStatus==p.SnakeStatus.Alive&&this.player.refreshAllCollider()},e.prototype.initRobotSnake=function(t){var e=cc.instantiate(this.Prefeb_Snake_Robot);e.parent=this.Node_Map;var o=e.getComponent(d.default),n=[5,10,15],i=Math.floor(Math.random()*n.length);o.initRobot(n[i],50,t),o.setMapNode(this.Node_Map),o.setSnakeType(p.SnakeType.Other),o.setOwnedCoinNumber(300),o.addUserInfoUi(),o.updateUserOwnedCoins(),this.AutoSnakeList.push(e)},e.prototype.initSelfSnake=function(t){var e=this,o=cc.instantiate(this.Prefeb_Snake_Normal);o.parent=this.Node_Map;var n=o.getComponent(f.default);n.initPlayer(5,50,t),n.setMapNode(this.Node_Map),n.addSnakeListener(),n.setSnakeType(p.SnakeType.Self),n.setOwnedCoinNumber(300),n.addUserInfoUi(),n.updateUserOwnedCoins(),this.player=n,this.playerCameraCtrl.setTargetNode(o),this.joyStick.setPlayerNode(o),setTimeout(function(){e.player.snakeBornProtect()})},e.prototype.render=function(t){this.totalFrame++,this.totalFrame%6==0&&this.sendFrameDataToServer();for(var e=0;e<this.AutoSnakeList.length;e++)this.AutoSnakeList[e].getComponent(d.default).updateRenderFrame(t);this.player.updateRenderFrame(t),this.playerCameraCtrl.updateRenderFrame(t),this.propsCtrl.updateRenderFrame(t)},e.prototype.sendFrameDataToServer=function(){this.GameState===p.GameState.Playing&&(new l.Decimal(this.joyStick.dir.x.toString()).toNumber(),new l.Decimal(this.joyStick.dir.y.toString()).toNumber())},e.prototype.onSnakeEatProp=function(t,e,o){var n=null;switch(n=e==p.SnakeType.Self?this.player:this.AutoSnakeList[o].getComponent(d.default),t){case p.PorpsType.Coin:n.addOwnedCoinNumber(20);break;case p.PorpsType.Absorb:n.updateAbsorbArea();break;case p.PorpsType.Shield:n.snakeEatShield();break;case p.PorpsType.Rocket:n.snakeRocket();break;case p.PorpsType.Mushroom:n.hasMushroom||(n.snakeEatMushroom(),setTimeout(function(){n.shapeTurnToSmall()},1e4))}},e.prototype.snakeRevive=function(){this.joyStick.node.active=!0,this.speedUpBtn.node.active=!0,this.GameState=p.GameState.Playing,this.player.resetSnake(),this.player.revive(),this.playerCameraCtrl.setTargetNode(this.player.node),this.currViewSnake=1e3},e.prototype.start=function(){this.initGame(),setInterval(this.render.bind(this),m.toNumber(),this._renderFrame)},r([c(cc.Prefab)],e.prototype,"Prefeb_Snake_Normal",void 0),r([c(cc.Prefab)],e.prototype,"Prefeb_Snake_Robot",void 0),r([c(cc.Node)],e.prototype,"Node_Map",void 0),r([c(u.JoyStick)],e.prototype,"joyStick",void 0),r([c(g.SpeedUp)],e.prototype,"speedUpBtn",void 0),r([c(_.default)],e.prototype,"propsCtrl",void 0),r([s],e)}(cc.Component);o.default=k,cc._RF.pop()},{"../Constant":"Constant","../JoyStick":"JoyStick","../Prefab/BaseSnake":"BaseSnake","../Prefab/SnakeModeGoldPlayer":"SnakeModeGoldPlayer","../Prefab/SnakeModeGoldRobot":"SnakeModeGoldRobot","../SpeedUp":"SpeedUp","../Utils/Decimal":"Decimal","./FoodLayerCtrl":"FoodLayerCtrl","./PlayerViewCameraCtrl":"PlayerViewCameraCtrl","./PropsLayerCtrl":"PropsLayerCtrl"}],GameUiControl:[function(t,e,o){"use strict";cc._RF.push(e,"79affiMQENGwIASaDNDpvtn","GameUiControl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../Utils/Decimal"),p=t("../Constant"),h=(new l.Decimal((1e3/p.RENDER_FRAME_DT).toFixed(3)),new l.Decimal((1e3/p.LOGIC_FRAME_DT).toFixed(3)),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.totalFrame=0,e.GameState=p.GameState.Playing,e.currViewSnake=null,e.gameMode=p.GameMode.Gold,e.Node_Mode_Gold=null,e.Node_Mode_Unlimited=null,e}return i(e,t),e.prototype.onLoad=function(){cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),this.setGameMode(p.GameMode.Unlimited),this.gameLaunch()},e.prototype.setGameMode=function(t){this.gameMode=t},e.prototype.gameLaunch=function(){this.gameMode!=p.GameMode.Gold?this.gameMode!=p.GameMode.Unlimited||(this.Node_Mode_Unlimited.active=!0):this.Node_Mode_Gold.active=!0},r([c(cc.Node)],e.prototype,"Node_Mode_Gold",void 0),r([c(cc.Node)],e.prototype,"Node_Mode_Unlimited",void 0),r([s],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../Constant":"Constant","../Utils/Decimal":"Decimal"}],GameUnlimitedModeSnakeCreateCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"9778fF0G2hK5YbtRp9RUhB6","GameUnlimitedModeSnakeCreateCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=t("../Prefab/SnakeModeUnlimitedRobot"),c=t("../SnakeDataMgr"),l=t("../Utils/SnakeUtils"),p=t("./CollisionCtrl"),h=cc._decorator,d=h.ccclass,u=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerNode=null,e.node_map=null,e.prefab_robot=null,e.camera_map=null,e.autoAddInterval=null,e.id=0,e.playerSkinType=-1,e.robotSnakeList=[],e.aliveList=[],e.deathList=[],e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on("onRobotSnakeDeath",this.onRobotSnakeDeath,this)},e.prototype.onDestroy=function(){this.autoAddInterval&&clearInterval(this.autoAddInterval)},e.prototype.setPlayerNode=function(t,e){this.playerNode=t,this.playerSkinType=e},e.prototype.setMapNode=function(t){this.node_map=t},e.prototype.checkSnakeAroundPlayer=function(){},e.prototype.launchAddStep=function(){this.autoAddInterval=setInterval(this.addRobotSnake.bind(this),2e3)},e.prototype.onRobotSnakeDeath=function(t,e){if(this.removeRobotById(e),this.removeFromAliveList(e),this.deathList.push(e),this.id++,this.id>=c.SnakeDataMgr.getInstance().AiSnakeList.length){var o=Math.floor(Math.random()*this.deathList.length);this.addSnakeAroundPlayer(this.deathList[o]),this.deathList.splice(o,1)}else this.addSnakeAroundPlayer(this.id)},e.prototype.addRobotSnake=function(){this.robotSnakeList.length>=10?this.autoAddInterval&&clearInterval(this.autoAddInterval):(this.id++,this.addSnakeAroundPlayer(this.id))},e.prototype.removeRobotById=function(t){for(var e=0;e<this.robotSnakeList.length;e++){var o=this.robotSnakeList[e].getComponent(s.default);if(o.SnakeId==t){this.robotSnakeList.splice(e,1),o.removeSnakeNode();break}}},e.prototype.setAbsorbAreaById=function(t){for(var e=function(e){var n=o.robotSnakeList[e].getComponent(s.default);if(n.SnakeId==t)return n.setAbsorbArea(a.ABSORB_AREA),setTimeout(function(){n&&n.snakeStatus!=a.SnakeStatus.Death&&n.resumeAbsorbArea()},1e3*a.ABSORB_DURATION),"break"},o=this,n=0;n<this.robotSnakeList.length&&"break"!==e(n);n++);},e.prototype.reviveRobotById=function(){},e.prototype.removeFromAliveList=function(t){for(var e=0;e<this.aliveList.length;e++)if(this.aliveList[e]==t){this.aliveList.splice(e,1);break}},e.prototype.addSnakeAroundPlayer=function(t){this.aliveList.push(t);var e=l.SnakeUtilMgr.getInstance(),o=this.node_map.width/2-200,n=e.getRandomNumer(o,-o),i=e.getRandomNumer(o,-o);this.addUnlimitedRobot(t,cc.v3(n,i,0))},e.prototype.addUnlimitedRobot=function(t,e){var o=c.SnakeDataMgr.getInstance().getSnakeInfoById(t);if(o){t%=100;var n=cc.instantiate(this.prefab_robot);n.parent=this.node_map;var i=n.getComponent(s.default);i.QuadCollision=p.default.getInstance().QuadCollision,i.setRobotSnakeDiffcultLevel(l.SnakeUtilMgr.getInstance().getRandomNumer(300,100));var r=Math.floor(10*Math.random()+5);i.setPlayerSkinType(this.playerSkinType),i.initSnakeNew(r,20,t,e),i.updateUserName(o.name,a.SnakeType.Other),i.updateSnakeScore(o.score),i.setMapNode(this.node_map),i.setSnakeType(a.SnakeType.Other),i.snakeBornProtect(),this.robotSnakeList.push(n)}},e.prototype.updateRenderFrame=function(t){if(this.robotSnakeList&&!(this.robotSnakeList.length<=0))for(var e=0;e<this.robotSnakeList.length;e++)this.robotSnakeList[e].getComponent(s.default).updateRenderFrame(t)},r([u(cc.Node)],e.prototype,"node_map",void 0),r([u(cc.Prefab)],e.prototype,"prefab_robot",void 0),r([u(cc.Camera)],e.prototype,"camera_map",void 0),r([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Constant":"Constant","../Prefab/SnakeModeUnlimitedRobot":"SnakeModeUnlimitedRobot","../SnakeDataMgr":"SnakeDataMgr","../Utils/SnakeUtils":"SnakeUtils","./CollisionCtrl":"CollisionCtrl"}],GameUnlimitedModeUiCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"46effqGjT5OzYExakkMMtJw","GameUnlimitedModeUiCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=t("../JoyStick"),c=t("../Manager/SoundManager"),l=t("../Prefab/SnakeModeUnlimitedPlayer"),p=t("../Prefab/SnakeModeUnlimitedRobot"),h=t("../SpeedUp"),d=t("../Utils/Decimal"),u=t("./CollisionCtrl"),f=t("./DialogGameEndCtrl"),y=t("./FoodLayerCtrl"),g=t("./GameUnlimitedModeSnakeCreateCtrl"),_=t("./PlayerViewCameraCtrl"),v=t("./SettingCtrl"),m=t("./TruetiemRankCtrl"),S=t("../Manager/NodePoolMgr"),k=t("./PropsLayerCtrl"),b=t("./StateDisplayCtrl"),C=t("../SnakeDataMgr"),P=new d.Decimal((1e3/a.RENDER_FRAME_DT).toFixed(3)),M=new d.Decimal((1e3/a.LOGIC_FRAME_DT).toFixed(3)),A=cc._decorator,R=A.ccclass,N=A.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SnakeUnlimitedRobot=null,e.SnakeUnlimitedPlayer=null,e.node_map=null,e.joyStick=null,e.speedUpBtn=null,e.gameEndCtrl=null,e.beginTimer=null,e.trueTimerankCtrl=null,e.settingCtrl=null,e.stateCtrl=null,e.killNumber=null,e.customCollisionCtrl=null,e.AutoSnakeList=[],e.playerCameraCtrl=null,e.foodLayerCtrl=null,e.propsLayerCtrl=null,e.totalFrame=0,e.player=null,e.gameState=a.GameState.End,e.snakeCreateCtrl=null,e._renderFrame=P.toNumber()/1e3,e._logicFrame=M.toNumber()/1e3,e.renderMainLoop=null,e.foodInterval=-1,e.propInterval=-1,e}return i(e,t),e.prototype.onLoad=function(){this.initScript(),this.addEventListener(),C.SnakeDataMgr.getInstance().composeAiSnakeInfo()},e.prototype.onDestroy=function(){this.removeEventListener(),this.clearInterval(),this.clearCache(),this.resetGameData()},e.prototype.initScript=function(){this.playerCameraCtrl=this.node.getComponent(_.default),this.foodLayerCtrl=this.node_map.getComponent(y.default),this.snakeCreateCtrl=this.node.getComponent(g.default),this.customCollisionCtrl=u.default.getInstance(),this.propsLayerCtrl=this.node_map.getComponent(k.default)},e.prototype.resetGameData=function(){C.SnakeDataMgr.getInstance().Kill=0,C.SnakeDataMgr.getInstance().SnakeScore=0},e.prototype.clearInterval=function(){this.renderMainLoop&&clearInterval(this.renderMainLoop),this.foodInterval&&clearInterval(this.foodInterval),this.propInterval&&clearInterval(this.propInterval)},e.prototype.clearCache=function(){S.default.getInstance().clearAll(),this.customCollisionCtrl.clearQuadCollision(),this.customCollisionCtrl=null},e.prototype.start=function(){var t=this;this.settingCtrl.hideSetting(),this.playBeginAnimation(),setTimeout(function(){t.trueTimerankCtrl.initRankData()},1e3)},e.prototype.addEventListener=function(){cc.systemEvent.on("onGameEnd",this.onGameEnd,this),cc.systemEvent.on("onSnakeDeath",this.onSnakeDeath,this),cc.systemEvent.on("onSnakeEatAbsorb",this.onSnakeEatAbsorb,this),cc.systemEvent.on("onPlayerKillSnake",this.onPlayerKillSnake,this),cc.systemEvent.on("onPlayerRevive",this.onSnakeRevive,this)},e.prototype.removeEventListener=function(){cc.systemEvent.off("onGameEnd",this.onGameEnd,this),cc.systemEvent.off("onSnakeDeath",this.onSnakeDeath,this)},e.prototype.onSnakeEatAbsorb=function(t,e,o){var n=this;e==a.SnakeType.Self?(this.player.setAbsorbArea(a.ABSORB_AREA),this.stateCtrl.setAbsorbInterval(function(){n.player.resumeAbsorbArea()})):this.snakeCreateCtrl.setAbsorbAreaById(o)},e.prototype.onPlayerKillSnake=function(t){var e=this.killNumber.node;e.active=!0,e.scale=0,this.killNumber.string=t,e.stopAllActions(),C.SnakeDataMgr.getInstance().setPlayerKillNumber(t),window&&window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(10),cc.tween(e).to(.1,{scale:1},{easing:"sineIn"}).delay(1.2).to(.1,{scale:0}).call(function(){e.active=!1}).start()},e.prototype.initUnlimitedGame=function(){this.trueTimerankCtrl.showRankList(),this.addUnlimitedPlayer(),this.foodLayerCtrl.putFoodToMap(300),this.foodInterval=setInterval(this.addFoodToMap.bind(this),2e4),this.addPropsToMap(),this.propInterval=setInterval(this.addPropsToMap.bind(this),6e4),this.snakeCreateCtrl.launchAddStep()},e.prototype.addPropsToMap=function(){this.gameState==a.GameState.Playing&&this.propsLayerCtrl.createProps()},e.prototype.addFoodToMap=function(){this.gameState==a.GameState.Playing&&this.foodLayerCtrl.putFoodToMap(100)},e.prototype.addUnlimitedRobot=function(t){var e=cc.instantiate(this.SnakeUnlimitedRobot);e.parent=this.node_map;var o=e.getComponent(p.default);o.QuadCollision=this.customCollisionCtrl.QuadCollision,o.initSnake(5,50,t),o.setMapNode(this.node_map),o.setSnakeType(a.SnakeType.Other),this.AutoSnakeList.push(e)},e.prototype.refreshSnakeCollision=function(){for(var t=0;t<this.AutoSnakeList.length;t++){var e=this.AutoSnakeList[t];e.active&&e.getComponent(p.default).refreshAllCollider()}this.player.snakeStatus==a.SnakeStatus.Alive&&this.player.refreshAllCollider()},e.prototype.addUnlimitedPlayer=function(){var t=C.SnakeDataMgr.getInstance().getPlayerInfo(),e=cc.instantiate(this.SnakeUnlimitedPlayer);e.parent=this.node_map;var o=e.getComponent(l.default);o.QuadCollision=this.customCollisionCtrl.QuadCollision,o.initSnakeNew(5,20,C.SnakeDataMgr.getInstance().UserId),o.setMapNode(this.node_map),o.updateUserName(t.name,a.SnakeType.Self),o.setSnakeType(a.SnakeType.Self),o.updateSnakeScore(0),this.player=o,this.playerCameraCtrl.setTargetNode(e),this.joyStick.setPlayerNode(e),o.snakeBornProtect(),this.snakeCreateCtrl.setPlayerNode(e,o.skinType)},e.prototype.render=function(t){this.gameState==a.GameState.Playing&&(this.totalFrame++,this.customCollisionCtrl.QuadCollision.updateTree(this.node_map),this.snakeCreateCtrl.updateRenderFrame(t),this.player.updateRenderFrame(t),this.propsLayerCtrl.updateRenderFrame(t))},e.prototype.onSnakeDeath=function(){},e.prototype.onGameContinue=function(){this.gameState=a.GameState.Playing,this.joyStick.showJoyStick(),this.speedUpBtn.node.active=!0,c.default.getInstance().playGamingBmg()},e.prototype.onHideGameEndDialog=function(){this.gameEndCtrl.hideGameEndDialog(),this.onGameContinue()},e.prototype.onShowGameEndDialog=function(){this.gameState=a.GameState.Pause,this.joyStick.hideJoyStick(),this.speedUpBtn.node.active=!1,this.gameEndCtrl.showGameEndDialog(f.DialogType.KeepPlay)},e.prototype.onGameEnd=function(){this.gameState=a.GameState.End,this.gameEndCtrl.showGameEndDialog(f.DialogType.Quit),this.joyStick.resetJoyStick(),this.joyStick.hideJoyStick(),this.speedUpBtn.node.active=!1,this.player.resumeAbsorbArea(),this.stateCtrl.removeState(),c.default.getInstance().stopAllSound()},e.prototype.playBeginAnimation=function(){var t=this;this.beginTimer.active=!0;var e=this.beginTimer.getComponent(cc.Animation).play();this.customCollisionCtrl.initCollider(this.node_map),setTimeout(function(){t.beginTimer.active=!1,t.renderMainLoop=setInterval(t.render.bind(t),P.toNumber(),t._renderFrame),t.onGameContinue(),t.settingCtrl.showSetting(),t.initUnlimitedGame()},1e3*e.duration)},e.prototype.jumpToIndexScene=function(){this.gameEndCtrl.sendGameQuitStatus(),this.gameEndCtrl.hideGameEndDialog(),this.gameEndCtrl.jumpToIndexScene()},e.prototype.onSnakeRevive=function(){this.playerCameraCtrl.setTargetNode(this.player.node),this.player.onSnakeRevive(),this.gameEndCtrl.hideGameEndDialog(),this.onGameContinue()},e.prototype.snakeRevive=function(t,e){if(t==a.SnakeType.Self)this.joyStick.node.active=!0,this.speedUpBtn.node.active=!0,this.playerCameraCtrl.setTargetNode(this.player.node),this.player.onSnakeRevive();else{var o=this.AutoSnakeList[e];if(!o)return;o.getComponent(p.default).onSnakeRevive()}},r([N(cc.Prefab)],e.prototype,"SnakeUnlimitedRobot",void 0),r([N(cc.Prefab)],e.prototype,"SnakeUnlimitedPlayer",void 0),r([N(cc.Node)],e.prototype,"node_map",void 0),r([N(s.JoyStick)],e.prototype,"joyStick",void 0),r([N(h.SpeedUp)],e.prototype,"speedUpBtn",void 0),r([N(f.default)],e.prototype,"gameEndCtrl",void 0),r([N(cc.Node)],e.prototype,"beginTimer",void 0),r([N(m.default)],e.prototype,"trueTimerankCtrl",void 0),r([N(v.default)],e.prototype,"settingCtrl",void 0),r([N(b.default)],e.prototype,"stateCtrl",void 0),r([N(cc.Label)],e.prototype,"killNumber",void 0),r([R],e)}(cc.Component);o.default=I,cc._RF.pop()},{"../Constant":"Constant","../JoyStick":"JoyStick","../Manager/NodePoolMgr":"NodePoolMgr","../Manager/SoundManager":"SoundManager","../Prefab/SnakeModeUnlimitedPlayer":"SnakeModeUnlimitedPlayer","../Prefab/SnakeModeUnlimitedRobot":"SnakeModeUnlimitedRobot","../SnakeDataMgr":"SnakeDataMgr","../SpeedUp":"SpeedUp","../Utils/Decimal":"Decimal","./CollisionCtrl":"CollisionCtrl","./DialogGameEndCtrl":"DialogGameEndCtrl","./FoodLayerCtrl":"FoodLayerCtrl","./GameUnlimitedModeSnakeCreateCtrl":"GameUnlimitedModeSnakeCreateCtrl","./PlayerViewCameraCtrl":"PlayerViewCameraCtrl","./PropsLayerCtrl":"PropsLayerCtrl","./SettingCtrl":"SettingCtrl","./StateDisplayCtrl":"StateDisplayCtrl","./TruetiemRankCtrl":"TruetiemRankCtrl"}],IndexCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ec7447ORHdL44i48fPOd8d2","IndexCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Script/DataHandler/MsgCmdConstant"),s=t("../../../../Script/DataHandler/MsgDispatcher"),c=t("../../../../Script/Managers/GameMgr"),l=t("../../../../Script/Managers/Logger"),p=t("../../../../Script/Managers/NetMgr"),h=t("../../../../Script/Utils/App_connect"),d=t("../../../../Script/Utils/utils_common"),u=t("../../../../Script/msg/GetGameNickAvatarMsg"),f=t("../../../../Script/msg/IntoGameHallMsg"),y=t("../../../../Script/msg/SingleGameStatusMsg"),g=t("../Constant"),_=t("../Lang/index"),v=t("./Index_RankCtrl"),m=t("./PromptHelpCtrl"),S=cc._decorator,k=S.ccclass,b=S.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_best_total=null,e.text_best_personal=null,e.text_describe_start=null,e.node_start=null,e.node_loading=null,e.progressNode=null,e.pecent=null,e.rank=null,e.help=null,e.isOppesite=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),this.addSocketEventListener(),this.preloadScene(),this.adjustProgressDir(),h.loadAssetFinished(),this.noticeAppAdjustzIndex("0")},e.prototype.onDestroy=function(){this.removeSocketEventListener()},e.prototype.addSocketEventListener=function(){var t=p.NetMgr.getInstance().getNet();t.addResponeHandler(a.MsgCmdConstant.MSG_GET_GAME_NICK_AVATAR_ACK,this.getAiNickAvatarList,this),t.addResponeHandler(a.MsgCmdConstant.MSG_INTO_SNAKE_GAME_HALL_ACK,this.onIntoSnakeGameHallAck,this),t.addResponeHandler(a.MsgCmdConstant.MSG_INTO_GAME_TABLE_ACK,this.onGetGameStatus,this)},e.prototype.removeSocketEventListener=function(){var t=p.NetMgr.getInstance().getNet();t.removeResponeHandler(a.MsgCmdConstant.MSG_GET_GAME_NICK_AVATAR_ACK,this.getAiNickAvatarList,this),t.removeResponeHandler(a.MsgCmdConstant.MSG_INTO_SNAKE_GAME_HALL_ACK,this.onIntoSnakeGameHallAck,this),t.removeResponeHandler(a.MsgCmdConstant.MSG_INTO_GAME_TABLE_ACK,this.onGetGameStatus,this)},e.prototype.getAiNickAvatarList=function(t){var e=t.avatars,o=t.nicks;c.default.getInstance().Avatars=e,c.default.getInstance().Nicks=o,l.Logger.logNet(t,"\u83b7\u53d6ai\u86c7\u7684\u540d\u5b57\u548c\u5934\u50cf")},e.prototype.onIntoSnakeGameHallAck=function(t){var e=t.maxRecord,o=t.myRecord;l.Logger.logNet(t,"\u767b\u5f55snake\u5927\u5385\u54cd\u5e94"),this.updatePersonalBestScore(o.toNumber()),this.updateWeeklyBestScore(e.toNumber())},e.prototype.onIntoSnakeGameHall=function(){var t=new f.IntoGameHallMsg,e=c.default.getInstance();t.userId=dcodeIO.Long.fromNumber(e.UserId),t.gameId=e.GameId,s.MsgDispatcher.sendMsg(t)},e.prototype.sendMsgGetGameNickAvatarMsg=function(){var t=c.default.getInstance(),e=new u.GetGameNickAvatarMsg;e.gameId=t.GameId,l.Logger.logModel(e,"\u7ec4\u88c5\u6210\u7684\u53d1\u5c04\u4fe1\u606f"),s.MsgDispatcher.sendMsg(e)},e.prototype.onGetGameStatus=function(t){l.Logger.logNet(t,"\u63a5\u6536\u6e38\u620f\u72b6\u6001");var e=t.subGamePlayJsonFields,o=t.tableId,n=c.default.getInstance();n.TableId=o,n.Props=JSON.parse(e).props[0],l.Logger.logNet(n.Props,"\u9053\u5177\u4fe1\u606f"),this.jumpToGameScene()},e.prototype.sendGameStartMsg=function(){var t=new y.SingleGameStatusMsg,e=c.default.getInstance();t.gameId=e.GameId,t.userId=dcodeIO.Long.fromNumber(e.UserId),t.gameNo=0,t.statusType=0,this.jumpToGameScene()},e.prototype.adjustProgressDir=function(){var t=c.default.getInstance().Language,e=this.progressNode.node;t==g.LANGUAGE_TYPE.ARAB?(e.angle=180,e.scaleY=-1,this.isOppesite=!0):(e.angle=0,e.scaleY=1,this.isOppesite=!1)},e.prototype.noticeAppAdjustzIndex=function(t){h.adjustWebviewzIndex(t,this.node_start.height)},e.prototype.preloadScene=function(){cc.director.preloadScene("MultiSnake")},e.prototype.jumpToGameScene=function(){var t=this,e=cc.view.getFrameSize();this.pecent.string="0%",this.progressNode.progress=0,cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),this.node_loading.active=!0,this.node_start.active=!1,this.node_loading.scale=e.width/e.height,cc.director.preloadScene("MultiSnake",function(e,o){var n=e/o,i=Math.floor(100*n);t.progressNode.progress>n||(t.progressNode.progress=n,t.isOppesite?t.pecent.string="%"+i:t.pecent.string=i+"%")},function(){setTimeout(function(){cc.director.loadScene("MultiSnake")},500)}),this.noticeAppAdjustzIndex("1")},e.prototype.updateWeeklyBestScore=function(t){var e,o=c.default.getInstance(),n=d.numberFormat(t);e=o.Language!=g.LANGUAGE_TYPE.ARAB?d.handleTranslate(n,_.language.en.weeklyBest):d.handleTranslate(n,_.language.ar.weeklyBest),this.text_best_total.string=e},e.prototype.updatePersonalBestScore=function(t){var e,o=c.default.getInstance(),n=d.numberFormat(t);e=o.Language!=g.LANGUAGE_TYPE.ARAB?d.handleTranslate(n,_.language.en.personalBest):d.handleTranslate(n,_.language.ar.personalBest),this.text_best_personal.string=e},e.prototype.updateStartBtnDescribe=function(){var t;t=c.default.getInstance().Language!=g.LANGUAGE_TYPE.ARAB?_.language.en.startChallenge:_.language.ar.startChallenge,this.text_describe_start.string=t},e.prototype.showRank=function(){this.noticeAppAdjustzIndex("1"),this.rank.onRankPromptShow()},e.prototype.hideRank=function(){this.noticeAppAdjustzIndex("0"),this.rank.onRankPromptHide()},e.prototype.showHelp=function(){this.noticeAppAdjustzIndex("1"),this.help.onHelpPromptShow()},e.prototype.hideHelp=function(){this.noticeAppAdjustzIndex("0"),this.help.onHelpPromptHide()},e.prototype.onGameClose=function(){h.evokeNativeToQuitGame()},e.prototype.loginSnakeGame=function(){var t=this;cc.game.isGameLogin?(this.onIntoSnakeGameHall(),this.sendMsgGetGameNickAvatarMsg()):setTimeout(function(){t.loginSnakeGame()},300)},e.prototype.start=function(){this.updateStartBtnDescribe(),this.updatePersonalBestScore(0),this.updateWeeklyBestScore(0),this.loginSnakeGame()},r([b(cc.Label)],e.prototype,"text_best_total",void 0),r([b(cc.Label)],e.prototype,"text_best_personal",void 0),r([b(cc.Label)],e.prototype,"text_describe_start",void 0),r([b(cc.Node)],e.prototype,"node_start",void 0),r([b(cc.Node)],e.prototype,"node_loading",void 0),r([b(cc.ProgressBar)],e.prototype,"progressNode",void 0),r([b(cc.Label)],e.prototype,"pecent",void 0),r([b(v.default)],e.prototype,"rank",void 0),r([b(m.default)],e.prototype,"help",void 0),r([k],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../../../../Script/DataHandler/MsgCmdConstant":void 0,"../../../../Script/DataHandler/MsgDispatcher":void 0,"../../../../Script/Managers/GameMgr":void 0,"../../../../Script/Managers/Logger":void 0,"../../../../Script/Managers/NetMgr":void 0,"../../../../Script/Utils/App_connect":void 0,"../../../../Script/Utils/utils_common":void 0,"../../../../Script/msg/GetGameNickAvatarMsg":void 0,"../../../../Script/msg/IntoGameHallMsg":void 0,"../../../../Script/msg/SingleGameStatusMsg":void 0,"../Constant":"Constant","../Lang/index":"index","./Index_RankCtrl":"Index_RankCtrl","./PromptHelpCtrl":"PromptHelpCtrl"}],Index_RankCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ee3f0YFjs9P96GYRFC9T+PI","Index_RankCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../Script/DataHandler/MsgCmdConstant"),c=t("../../../../Script/DataHandler/MsgDispatcher"),l=t("../../../../Script/Managers/GameMgr"),p=t("../../../../Script/Managers/Logger"),h=t("../../../../Script/Managers/NetMgr"),d=t("../../../../Script/msg/GetSnakeGameRankMsg"),u=t("../Constant"),f=t("../Lang/index"),y=t("../Utils/SnakeUtils"),g=cc._decorator,_=g.ccclass,v=g.property,m=(cc.v3(-233,5,0),cc.v3(0,5,0),cc.v3(233,5,0),cc.v3(233,5,0),cc.v3(0,5,0),cc.v3(-233,5,0),cc.color(254,255,242),cc.color(0,51,12),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnPosList=[],e.btnTextList=[],e.describeList=[],e.fadeConst=1,e.ItemNodePool=null,e.currentType=null,e.currentPage=null,e.totalPage=null,e.text_rank_title=null,e.prefab_rank_item=null,e.scrollview=null,e.scrollviewContainer=null,e.mask=null,e}return i(e,t),e.prototype.onLoad=function(){this.initRankTitle()},e.prototype.initItemNodePool=function(){var t,e;return a(this,function(o){switch(o.label){case 0:this.ItemNodePool||(this.ItemNodePool=new cc.NodePool),t=0,o.label=1;case 1:return t<10?(e=cc.instantiate(this.prefab_rank_item),this.ItemNodePool.put(e),[4]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.getRankItemInstance=function(){var t;return this.ItemNodePool.size()>0?(t=this.ItemNodePool.get()).opacity=255:t=cc.instantiate(this.prefab_rank_item),t},e.prototype.onEnable=function(){this.addSocketListener(),y.SnakeUtilMgr.getInstance().executePreFrame(this.initItemNodePool(),5),this.addScrollviewListener(),this.sendGetSnakeRankMsg()},e.prototype.onDisable=function(){this.removeSocketListener(),this.ItemNodePool.clear(),this.removeScrollviewListener()},e.prototype.start=function(){},e.prototype.addSocketListener=function(){h.NetMgr.getInstance().getNet().addResponeHandler(s.MsgCmdConstant.MSG_GET_SNAKE_GAME_RANK_ACK,this.updateRankInfo,this)},e.prototype.removeSocketListener=function(){h.NetMgr.getInstance().getNet().removeResponeHandler(s.MsgCmdConstant.MSG_GET_SNAKE_GAME_RANK_ACK,this.updateRankInfo,this)},e.prototype.addScrollviewListener=function(){this.scrollview.node.on("scroll-to-bottom",this.onScrollToEnd,this),this.scrollview.node.on("scrolling",this.onScrollViewRolling,this)},e.prototype.removeScrollviewListener=function(){this.scrollview.node.off("scroll-to-bottom",this.onScrollToEnd,this)},e.prototype.onScrollToEnd=function(){this.currentPage!=this.totalPage&&this.sendRankInfoMsg(this.currentPage+1,10,this.currentType)},e.prototype.sendGetSnakeRankMsg=function(){var t=new d.GetSnakeGameRankMsg,e=l.default.getInstance();t.gameId=e.GameId,t.tableId=e.TableId,t.pageNum=1,t.pageSize=100,p.Logger.logNet(t,"\u83b7\u53d6\u6392\u884c\u699c\u4fe1\u606f"),c.MsgDispatcher.sendMsg(t)},e.prototype.onScrollViewRolling=function(){this.optimizationDrawCall()},e.prototype.updateRankInfo=function(t){p.Logger.logBusiness(t,"\u66f4\u65b0\u6392\u884c\u699c\u4fe1\u606f");var e=t.snakeRankItemList;y.SnakeUtilMgr.getInstance().executePreFrame(this.initRankBoard(e),5)},e.prototype.getMockRankItemList=function(){for(var t=[],e=1;e<100;e++){var o={rankNo:e,score:Math.floor(1e5*Math.random()),name:"mock___"+e,avatar:"",id:e};t.push(o)}return t},e.prototype.getMockMyItem=function(){},e.prototype.sendRankInfoMsg=function(t,e,o){void 0===t&&(t=1),void 0===e&&(e=10),void 0===o&&(o=0)},e.prototype.onToggleBtnClick=function(){},e.prototype.initBtnPos=function(){},e.prototype.initBtnText=function(){},e.prototype.initRankTitle=function(){var t;t=l.default.getInstance().Language==u.LANGUAGE_TYPE.EN?f.language.en.weeklyList:f.language.ar.weeklyList,this.text_rank_title.string=t},e.prototype.onRankPromptHide=function(){this.mask.active=!1,this.node.active=!1},e.prototype.onRankPromptShow=function(){this.node.active=!0,this.mask.active=!0,this.node.position=cc.v3(0,45,0)},e.prototype.initRankBoard=function(t){var e,o;return a(this,function(n){switch(n.label){case 0:this.scrollviewContainer.removeAllChildren(),e=0,n.label=1;case 1:return e<t.length?((o=this.getRankItemInstance()).parent=this.scrollviewContainer,o.getComponent("prefab_rank_item_ctrl").initRankItem(t[e]),[4]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype.recycleItem=function(){for(var t=this.scrollviewContainer.childrenCount-1;t>=0;t--){var e=this.scrollviewContainer.children[t];this.ItemNodePool.put(e)}},e.prototype.addRestDataToContainer=function(t,e){for(var o=0,n=t.length;o<n;o++){var i=this.getRankItemInstance();i.getComponent("prefab_rank_item_ctrl").initRankItem(t[o],e),i.parent=this.scrollviewContainer}},e.prototype.jumpToFreshData=function(){var t=this.currentPage-1>0?10*(this.currentPage-1):10,e=this.scrollviewContainer.children[t].y,o=this.scrollviewContainer.children[t].height;this.scrollview.scrollToOffset(cc.v2(0,-(e+o/2)),2)},e.prototype.optimizationDrawCall=function(){if(0!=this.scrollviewContainer.childrenCount){var t=this.scrollview.node.parent.convertToWorldSpaceAR(cc.v2(this.scrollview.node.x-this.scrollview.node.anchorX*this.scrollview.node.width,this.scrollview.node.y-this.scrollview.node.anchorY*this.scrollview.node.height)),e=cc.rect(t.x,t.y,this.scrollview.node.width,this.scrollview.node.height);this.scrollviewContainer.children.forEach(function(t){var o=t.getBoundingBoxToWorld();t.active&&(o.intersects(e)?0===t.opacity&&(t.opacity=255):0!==t.opacity&&(t.opacity=0))})}},r([v(cc.Label)],e.prototype,"text_rank_title",void 0),r([v(cc.Prefab)],e.prototype,"prefab_rank_item",void 0),r([v(cc.ScrollView)],e.prototype,"scrollview",void 0),r([v(cc.Node)],e.prototype,"scrollviewContainer",void 0),r([v(cc.Node)],e.prototype,"mask",void 0),r([_],e)}(cc.Component));o.default=m,cc._RF.pop()},{"../../../../Script/DataHandler/MsgCmdConstant":void 0,"../../../../Script/DataHandler/MsgDispatcher":void 0,"../../../../Script/Managers/GameMgr":void 0,"../../../../Script/Managers/Logger":void 0,"../../../../Script/Managers/NetMgr":void 0,"../../../../Script/msg/GetSnakeGameRankMsg":void 0,"../Constant":"Constant","../Lang/index":"index","../Utils/SnakeUtils":"SnakeUtils"}],JoyStick:[function(t,e,o){"use strict";cc._RF.push(e,"0b7d3yJHuBIlbWFAokgQ3uQ","JoyStick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.JoyStick=void 0;var a=t("./Prefab/BaseSnake"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSpeed=0,e.myView=null,e.node_touch=null,e.joyStickBtn=null,e.dir=null,e.player=null,e}return i(e,t),e.prototype.onLoad=function(){this.joyStickBtn=this.node.getChildByName("joystick_btn"),this.dir=cc.v3(0,0,0),this.node_touch.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node_touch.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node_touch.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onDestroy=function(){this.node_touch.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node_touch.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node_touch.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onTouchStart=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.joyStickBtn.setPosition(e)},e.prototype.onTouchMove=function(t){var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e));var o=this.joyStickBtn.position.normalize();Math.abs(o.x-this.dir.x)<.1&&Math.abs(o.y-this.dir.y)<.1||(this.dir=o,this.setPlayerDir(),t.stopPropagation())},e.prototype.onTouchEnd=function(){this.resetJoyStick()},e.prototype.onTouchCancel=function(){this.resetJoyStick()},e.prototype.setPlayerNode=function(t){this.player=t},e.prototype.hideJoyStick=function(){this.node_touch.active=!1,this.node.active=!1},e.prototype.showJoyStick=function(){this.node_touch.active=!0,this.node.active=!0},e.prototype.resetJoyStick=function(){this.joyStickBtn.setPosition(cc.v2(0,0))},e.prototype.setPlayerDir=function(){this.player&&(this.player.getComponent(a.default).dir=this.dir)},e.prototype.setCameraPos=function(){this.player&&(this.myView.node.position=this.player.position)},e.prototype.update=function(){var t=this.joyStickBtn.position.mag()/(this.node.width/2);t>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t))},r([l],e.prototype,"maxSpeed",void 0),r([l(cc.Camera)],e.prototype,"myView",void 0),r([l(cc.Node)],e.prototype,"node_touch",void 0),r([l(cc.Node)],e.prototype,"player",void 0),r([c],e)}(cc.Component);o.JoyStick=p,cc._RF.pop()},{"./Prefab/BaseSnake":"BaseSnake"}],LinearGradient:[function(t,e,o){"use strict";cc._RF.push(e,"d0e8aa5fDRBNYXM4/wKpzBc","LinearGradient");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colors=[],e}return i(e,t),e.prototype.onEnable=function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this)},e.prototype.onDisable=function(){cc.director.off(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR},e.prototype._updateColors=function(){var t=this.getComponent(cc.RenderComponent);if(t){var e=t._assembler;if(e instanceof cc.Assembler2D){var o=e._renderData.uintVDatas[0];if(o)for(var n=this.node.color,i=e.floatsPerVert,r=0,a=e.colorOffset,s=o.length;a<s;a+=i)o[a]=(this.colors[r++]||n)._val}}},r([c([cc.Color])],e.prototype,"colors",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],NodePoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ad0b5xpalxCx76/OEC7mkzt","NodePoolMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._coinNodePool=null,this._porpsNodePool=null,this._snakeBodyNodePool=null,this._deathBodtNodePool=null,this._noticeNumberPool=null,this._effectNodePool=null}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"CoinNodePool",{get:function(){return this._coinNodePool||(this._coinNodePool=new cc.NodePool),this._coinNodePool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PorpsNodePool",{get:function(){return this._porpsNodePool||(this._porpsNodePool=new cc.NodePool),this._porpsNodePool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SnakeBodyNodePool",{get:function(){return this._snakeBodyNodePool||(this._snakeBodyNodePool=new cc.NodePool),this._snakeBodyNodePool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DeathBodyNodePool",{get:function(){return this._deathBodtNodePool||(this._deathBodtNodePool=new cc.NodePool),this._deathBodtNodePool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NoticeNumberPool",{get:function(){return this._noticeNumberPool||(this._noticeNumberPool=new cc.NodePool),this._noticeNumberPool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"EffectNodePool",{get:function(){return this._effectNodePool||(this._effectNodePool=new cc.NodePool),this._effectNodePool},enumerable:!1,configurable:!0}),t.prototype.clearAll=function(){this.CoinNodePool.clear(),this.PorpsNodePool.clear(),this.SnakeBodyNodePool.clear(),this.DeathBodyNodePool.clear(),this.EffectNodePool.clear()},t._instance=null,t}();o.default=n,cc._RF.pop()},{}],NumberNoticeCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ae82aeIS1ZDj5khFdFibqCl","NumberNoticeCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_number_notice=null,e}return i(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.onDestroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){cc.systemEvent.on("FoodNumberNotice",this.foodNumberNotice,this)},e.prototype.removeEventListener=function(){},e.prototype.foodNumberNotice=function(){},e.prototype.start=function(){},r([c(cc.Node)],e.prototype,"node_number_notice",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PlayerViewCameraCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"93186yaGD5JHafm7F9qabWq","PlayerViewCameraCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.Follow=0]="Follow",t[t.Static=1]="Static"})(a||(a={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera_playerView=null,e.targetNode=null,e.state=a.Follow,e}return i(e,t),e.prototype.setTargetNode=function(t){this.targetNode=t,this.state=a.Follow},e.prototype.resetCameraPos=function(){this.state=a.Static,this.camera_playerView.node.position=cc.v3(0,0,0)},e.prototype.syncCameraPos=function(){this.targetNode&&this.targetNode.isValid&&this.state===a.Follow&&(this.camera_playerView.node.position=this.targetNode.position)},e.prototype.updateRenderFrame=function(){this.syncCameraPos()},e.prototype.updateLogicFrame=function(){},e.prototype.update=function(){this.syncCameraPos()},r([l(cc.Camera)],e.prototype,"camera_playerView",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PromptHelpCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"32c90PmHbtEiqRJOZ0zUUVx","PromptHelpCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Script/Managers/GameMgr"),s=t("../Constant"),c=t("../Lang/index"),l=cc._decorator,p=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fadeConst=null,e.node_content=null,e.text_title=null,e.viewList_content=[],e.node_mask=null,e}return i(e,t),e.prototype.onLoad=function(){this.updatePromptTitle(),this.updateRulesContent()},e.prototype.updatePromptTitle=function(){a.default.getInstance().Language!=s.LANGUAGE_TYPE.ARAB?this.text_title.string=c.language.en.rules:this.text_title.string=c.language.ar.rules},e.prototype.updateRulesContent=function(){a.default.getInstance().Language!=s.LANGUAGE_TYPE.ARAB?this.node_content.getComponent(cc.Sprite).spriteFrame=this.viewList_content[0]:this.node_content.getComponent(cc.Sprite).spriteFrame=this.viewList_content[1]},e.prototype.onHelpPromptShow=function(){this.node.active=!0,this.node_mask.active=!0,this.node.position=cc.v3(0,0,0)},e.prototype.onHelpPromptHide=function(){this.node.active=!1,this.node_mask.active=!1},e.prototype.start=function(){},r([h(cc.Node)],e.prototype,"node_content",void 0),r([h(cc.Label)],e.prototype,"text_title",void 0),r([h([cc.SpriteFrame])],e.prototype,"viewList_content",void 0),r([h(cc.Node)],e.prototype,"node_mask",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../Script/Managers/GameMgr":void 0,"../Constant":"Constant","../Lang/index":"index"}],PropsLayerCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"6429eff3qdAXKFvahBHwpnk","PropsLayerCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Prefab/BaseProp"),l=t("../Utils/SnakeUtils"),p=t("./BaseLayer"),h=cc._decorator,d=h.ccclass,u=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab_props=null,e.propsPool=null,e.propsList=[],e.posMax=null,e}return i(e,t),e.prototype.onLoad=function(){this.posMax=Math.floor(this.node.width/2-200)},e.prototype.onEnable=function(){this.propsPool||(this.propsPool=new cc.NodePool),this.framingLoad(20)},e.prototype.onDisable=function(){this.propsPool.clear(),this.propsPool=null},e.prototype.randomPos=function(){var t=this.node.parent.width,e=this.node.parent.height,o=Math.round(Math.random()*(t-500))-t/2,n=Math.round(Math.random()*(e-500))-e/2;return cc.v3(o,n,0)},e.prototype.addPropsToNode=function(t,e){var o=this.getPorpsInstance();o.parent=this.node,o.position=t,o.getComponent(c.BaseProp).initPorps(e),this.propsList.push(o)},e.prototype.getPorpsInstance=function(){return this.propsPool.size()>0?this.propsPool.get():cc.instantiate(this.prefab_props)},e.prototype._getItemGenerator=function(t){var e;return s(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<t?[4,this._initItem()]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype._porpsItemGenerator=function(t,e){var o,n;return s(this,function(i){switch(i.label){case 0:o=0,n=t.length,i.label=1;case 1:return o<n?[4,this.addPropsToNode(t[o],e[o])]:[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2]}})},e.prototype._initItem=function(){var t=cc.instantiate(this.prefab_props);this.propsPool.put(t)},e.prototype.framingLoad=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.executePreFrame(this._getItemGenerator(t),1)];case 1:return e.sent(),[2]}})})},e.prototype.frameCreateProps=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,this.executePreFrame(this._porpsItemGenerator(t,e),2)];case 1:return o.sent(),[2]}})})},e.prototype.updateRenderFrame=function(t){if(this.propsList&&!(this.propsList.length<=0))for(var e=0,o=this.propsList.length;e<o;e++){var n=this.propsList[e];n.isValid&&n.getComponent(c.BaseProp).updateRenderFrame(t)}},e.prototype.createProps=function(){var t=l.SnakeUtilMgr.getInstance().getRandomPosList(15,this.posMax,-this.posMax);this.frameCreateProps(t,[3,3,3,3,3])},r([u(cc.Prefab)],e.prototype,"prefab_props",void 0),r([d],e)}(p.default);o.default=f,cc._RF.pop()},{"../Prefab/BaseProp":"BaseProp","../Utils/SnakeUtils":"SnakeUtils","./BaseLayer":"BaseLayer"}],QuadtreeCollision:[function(t,e,o){"use strict";cc._RF.push(e,"e318aa30whEApU0CBBHqi4K","QuadtreeCollision"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._tree=new r(t)}return t.prototype.updateTree=function(t){if(this._tree){this._tree.clear();for(var e=cc.director.getCollisionManager(),o=t.getComponentsInChildren(cc.Collider),n=0,i=o.length;n<i;n++){var r=o[n];e.updateCollider(r);var a=r.world.aabb,s={x:a.x,y:a.y,height:a.height,width:a.width,collider:r};this._tree.insert(s)}}},t.prototype.check=function(t){if(this._tree){var e={retrieve:[],contacts:[]};return this._tree.retrieve(t.world.aabb).forEach(function(o){e.retrieve.push(o.collider),i(o.collider,t)&&e.contacts.push(o.collider)}),e}},t.prototype.clear=function(){this._tree.clear(),this._tree=null},t}();function i(t,e){if(!cc.director.getCollisionManager().shouldCollide(t,e))return!1;var o=t.world,n=e.world;if(!o.aabb.intersects(n.aabb))return!1;var i=t instanceof cc.BoxCollider||t instanceof cc.PolygonCollider,r=e instanceof cc.BoxCollider||e instanceof cc.PolygonCollider,a=t instanceof cc.CircleCollider,s=e instanceof cc.CircleCollider;return i&&r?cc.Intersection.polygonPolygon(o.points,n.points):a&&s?cc.Intersection.circleCircle(o,n):i&&s?cc.Intersection.polygonCircle(o.points,n):!(!a||!r)&&cc.Intersection.polygonCircle(n.points,o)}function r(t,e,o,n){this.max_objects=e||10,this.max_levels=o||4,this.level=n||0,this.bounds=t,this.objects=[],this.nodes=[]}o.default=n,r.prototype.split=function(){var t=this.level+1,e=this.bounds.width/2,o=this.bounds.height/2,n=this.bounds.x,i=this.bounds.y;this.nodes[0]=new r({x:n+e,y:i,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[1]=new r({x:n,y:i,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[2]=new r({x:n,y:i+o,width:e,height:o},this.max_objects,this.max_levels,t),this.nodes[3]=new r({x:n+e,y:i+o,width:e,height:o},this.max_objects,this.max_levels,t)},r.prototype.getIndex=function(t){var e=[],o=this.bounds.x+this.bounds.width/2,n=this.bounds.y+this.bounds.height/2,i=t.y<n,r=t.x<o,a=t.x+t.width>o,s=t.y+t.height>n;return i&&a&&e.push(0),r&&i&&e.push(1),r&&s&&e.push(2),a&&s&&e.push(3),e},r.prototype.insert=function(t){var e,o=0;if(this.nodes.length)for(e=this.getIndex(t),o=0;o<e.length;o++)this.nodes[e[o]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),o=0;o<this.objects.length;o++){e=this.getIndex(this.objects[o]);for(var n=0;n<e.length;n++)this.nodes[e[n]].insert(this.objects[o])}this.objects=[]}},r.prototype.retrieve=function(t){var e=this.getIndex(t),o=this.objects;if(this.nodes.length)for(var n=0;n<e.length;n++)o=o.concat(this.nodes[e[n]].retrieve(t));return o=o.filter(function(t,e){return o.indexOf(t)>=e})},r.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]},cc._RF.pop()},{}],SettingCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"64c45SoAtpNI6cVXgwqNQP9","SettingCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Manager/SoundManager"),s=t("../../../../Script/Utils/App_connect"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite_mic=null,e.viewList_mic=[],e.sprite_music=null,e.viewList_music=[],e.sprite_singel=null,e.viewList_singel=[],e.text_singel=null,e.isMicOn=!1,e.isMusicOn=!1,e.singelNumber=10,e.isMICEnableClick=!0,e.isMusicEnableClick=!0,e.singleInterval=null,e}return i(e,t),e.prototype.onLoad=function(){this.singleInterval=setInterval(this.singelNumberChange.bind(this),2e3),this.loadMusicAsset(),this.addGlobalEvent(),cc.macro.ENABLE_TRANSPARENT_CANVAS=!1},e.prototype.onDestroy=function(){this.stopSingleInterval(),this.removeGlobalEvent(),a.default.getInstance().stopAllSound()},e.prototype.addGlobalEvent=function(){s.queryUserMICStateRespond(this.getMICOpenCloseState.bind(this)),s.openCloseMICStateCtrlRespond(this.getOnOrLeaveState.bind(this)),s.getNoticeAPPOpenCloseEffectRespond(this.getOpenCloseEffect.bind(this)),s.onShareResponse(this.getShareGame.bind(this))},e.prototype.removeGlobalEvent=function(){window&&window.queryUserMICStateRespond&&(window.queryUserMICStateRespond=null),window&&window.openCloseMICStateCtrlRespond&&(window.openCloseMICStateCtrlRespond=null),window&&window.openCloseEffectRespond&&(window.openCloseEffectRespond=null),window&&window.shareGameRespond&&(window.shareGameRespond=null)},e.prototype.loadMusicAsset=function(){var t=a.default.getInstance();t.loadResourceInBundle("Snake","Sound/bgm",t.type.music),t.loadResourceInBundle("Snake","Sound/effect",t.type.effect)},e.prototype.getOpenCloseEffect=function(t){t=JSON.parse(t)},e.prototype.getMICOpenCloseState=function(t){"1"==(t=JSON.parse(t)).isOnMIC&&t.isOpenMIC&&"1"==t.isOpenMIC?(this.isMicOn=!0,this.MICDisplayControl(!0)):(this.isMicOn=!1,this.MICDisplayControl(!1))},e.prototype.getOnOrLeaveState=function(t){var e=(t=JSON.parse(t)).type,o=t.isSucced;return"0"==e&&"1"==o?(this.MICDisplayControl(!1),void(this.isMicOn=!1)):"1"==e&&"1"==o?(this.MICDisplayControl(!0),void(this.isMicOn=!0)):void 0},e.prototype.getShareGame=function(t){console.log("getShareGame",t),cc.systemEvent.emit("getShareGame")},e.prototype.onClearReviveData=function(){cc.sys.localStorage.setItem("firstResurrection",null)},e.prototype.start=function(){this.queryMIC(),this.initMusicIconDisplay(),setTimeout(function(){a.default.getInstance().playGamingBmg()},3e3)},e.prototype.singelNumberChange=function(){this.text_singel.string=Math.floor(10*Math.random())+20+"ms"},e.prototype.queryMIC=function(){},e.prototype.MICDisplayControl=function(t){this.sprite_mic.spriteFrame=t?this.viewList_mic[0]:this.viewList_mic[1]},e.prototype.appMICCtrl=function(){this.isMicOn?(s.openCloseMICStateCtrl("0"),this.MICDisplayControl(!1),this.isMicOn=!1):(s.openCloseMICStateCtrl("1"),this.MICDisplayControl(!0),this.isMicOn=!0)},e.prototype.onMICIconClick=function(){var t=this;this.isMICEnableClick&&(this.isMICEnableClick=!1,setTimeout(function(){t.isMICEnableClick=!0},2e3),this.appMICCtrl())},e.prototype.onMusicIconClick=function(){var t=a.default.getInstance();t.isAudioOn()?(this.musicIconDisplayCtrl(!1),t.closeAudio(),t.stopAllSound()):(this.musicIconDisplayCtrl(!0),t.openAudio(),t.playGamingBmg())},e.prototype.musicIconDisplayCtrl=function(t){this.sprite_music.spriteFrame=t?this.viewList_music[0]:this.viewList_music[1]},e.prototype.initMusicIconDisplay=function(){var t=a.default.getInstance().isAudioOn();this.musicIconDisplayCtrl(t)},e.prototype.stopSingleInterval=function(){this.singleInterval&&clearInterval(this.singleInterval)},e.prototype.hideSetting=function(){this.node.active=!1},e.prototype.showSetting=function(){this.node.active=!0},e.prototype.adjustGameLayer=function(){s.adjustWebviewzIndex("1",400)},e.prototype.quit=function(){s.evokeNativeToQuitGame()},e.prototype.onCharge=function(){s.evokeNativeChargePage()},e.prototype.changeBgPic=function(){s.replaceRoomBg(400005,"http://pic.hghggh.com/game/games/dev/1l244myl2gc.jpg")},r([p(cc.Sprite)],e.prototype,"sprite_mic",void 0),r([p([cc.SpriteFrame])],e.prototype,"viewList_mic",void 0),r([p(cc.Sprite)],e.prototype,"sprite_music",void 0),r([p([cc.SpriteFrame])],e.prototype,"viewList_music",void 0),r([p(cc.Sprite)],e.prototype,"sprite_singel",void 0),r([p([cc.SpriteFrame])],e.prototype,"viewList_singel",void 0),r([p(cc.Label)],e.prototype,"text_singel",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../Script/Utils/App_connect":void 0,"../Manager/SoundManager":"SoundManager"}],ShieldCtr:[function(t,e,o){"use strict";cc._RF.push(e,"1fc15lTK79M0Yk9wx2/tbQx","ShieldCtr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progress=null,e.target=null,e.persistent=0,e.nodeScale=1,e.count=0,e.stepNumber=0,e.circleTimer=null,e}return i(e,t),e.prototype.setTarget=function(t){this.target=t},e.prototype.updateNodeScale=function(t){this.nodeScale=Math.floor(t/this.node.width*100)/100,this.node.scale=this.nodeScale},e.prototype.setPersistentTime=function(t){this.persistent=t,this.count=t,this.progress.fillRange=1,this.stepNumber=Math.floor(1/t*100)/100},e.prototype.resetShield=function(){this.progress.fillRange=1},e.prototype.circleInterval=function(){var t=this;this.circleTimer=setInterval(function(){t.progress.fillRange=t.progress.fillRange-t.stepNumber>=0?t.progress.fillRange-t.stepNumber:0,t.progress.fillRange<=0&&t.shieldDisapper()},1e3)},e.prototype.shieldDisapper=function(){this.node.active=!1,this.target.hasShield=!1,this.target.shieldCtrl=null,this.target=null,this.node.destroy(),clearInterval(this.circleTimer)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.circleTimer&&clearInterval(this.circleTimer)},r([c(cc.Sprite)],e.prototype,"progress",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SnakeDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f7ca4+LYolF6ZF35wGTV+0z","SnakeDataMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.SnakeDataMgr=void 0;var n=t("../../../Script/Managers/GameMgr"),i=t("../../../Script/domain/Player"),r=function(){function t(){this.seed=100,this.Kill=0,this.PreviewRank=1e3,this.SnakeLength=1e8,this.SnakeScore=1e3,this.WeeklyBest=1e7,this.PersonalBest=1e5,this.AiSnkaeAvatar=n.default.getInstance().Avatars,this.AiSnkaeName=n.default.getInstance().Nicks,this.AiSnakeList=[],this.DeathList=[],this.UserId=n.default.getInstance().UserId,this.loginServerTime=0}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setPlayerKillNumber=function(t){this.Kill=t},t.prototype.composeAiSnakeInfo=function(){if(!(this.AiSnkaeAvatar.length<=0||this.AiSnkaeName.length<=0))for(var t=0;t<100;t++){this.AiSnkaeName[t]===n.default.getInstance().Player.playerName&&(this.AiSnkaeName[t]=this.AiSnkaeName[Math.floor(Math.random()*this.AiSnkaeName.length)],this.AiSnkaeAvatar[t]=this.AiSnkaeAvatar[Math.floor(Math.random()*this.AiSnkaeAvatar.length)]);var e={avatar:this.AiSnkaeAvatar[t],name:this.AiSnkaeName[t],score:t%25==0?2e3-Math.floor(500*Math.random()):100+Math.floor(400*Math.random()),id:t,rank:t+1};this.AiSnakeList.push(e)}},t.prototype.getPlayerInfo=function(){var t=n.default.getInstance();return t.Player=new i.Player,{avatar:t.Player.headImageUrl,name:t.Player.playerName,score:100+Math.floor(500*Math.random()),id:t.UserId,rank:100}},t.prototype.getSnakeInfoById=function(t){var e;t>=100&&(t%=100);for(var o=0,n=this.AiSnakeList.length;o<n;o++){var i=this.AiSnakeList[o];if(i.id==t){e=i;break}}return e},t._instance=null,t}();o.SnakeDataMgr=r,cc._RF.pop()},{"../../../Script/Managers/GameMgr":void 0,"../../../Script/domain/Player":void 0}],SnakeModeGoldPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"5fe00mNQldDRa1Ep815J1ZX","SnakeModeGoldPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./SnakeModeGold"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initPlayer=function(t,e,o){this.initSnake(t,e,o),this.dir=this.getRandomDir()},e.prototype.addSnakeListener=function(){cc.systemEvent.on("SnakeSpeedUp",this.onPlayerSpeedUp,this),cc.systemEvent.on("SnakeSpeedNormal",this.onPlayerSpeedNormal,this)},e.prototype.onPlayerSpeedUp=function(){this.onSnakeSpeedUp()},e.prototype.onPlayerSpeedNormal=function(){this.onSnakeSpeedNormal()},e.prototype.updateRenderFrame=function(t){this.move(t),this.updateUserInfo(),this.updateShieldPos(),this.shapeUpdate(t)},e.prototype.updateLogicFrame=function(){},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./SnakeModeGold":"SnakeModeGold"}],SnakeModeGoldRobot:[function(t,e,o){"use strict";cc._RF.push(e,"f58ea3uz3pIV5QYwyedVaIt","SnakeModeGoldRobot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("./SnakeModeGold"),c=cc._decorator,l=c.ccclass;c.property,function(t){t[t.Alive=0]="Alive",t[t.Death=1]="Death",t[t.Protect=2]="Protect"}(a||(a={}));var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initRobot=function(t,e,o){this.initSnake(t,e,o),this.dir=this.getRandomDir(),this.setCheckColliderInterval()},e.prototype.updateRenderFrame=function(t){this.autoChooseMoveDir(),this.move(t),this.updateUserInfo(),this.updateShieldPos(),this.shapeUpdate(t)},e.prototype.updateLogicFrame=function(){},r([l],e)}(s.default);o.default=p,cc._RF.pop()},{"./SnakeModeGold":"SnakeModeGold"}],SnakeModeGold:[function(t,e,o){"use strict";cc._RF.push(e,"6f322DI1nlB94q0VWa5kEXg","SnakeModeGold");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=t("../Manager/NodePoolMgr"),c=t("./BaseSnake"),l=t("./DeathBody"),p=cc._decorator,h=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ownedCoins=0,e.hasShield=!1,e.hasRocket=!1,e.hasAbsorb=!1,e.hasMushroom=!1,e.isShorting=!1,e.isBiging=!1,e.tempLen=null,e}return i(e,t),e.prototype.snakeRocket=function(){this.hasRocket=!0},e.prototype.onSnakeSpeedUp=function(){this.snakeMoveState==a.SnakeMoveState.Normal&&(this.effectInterval=setInterval(this.speedUpEffect.bind(this),250),this.hasRocket?this._mulTimes=2.2:this._mulTimes=2,this._speed=this._mulTimes*this._speed,this.snakeMoveState=a.SnakeMoveState.AddSpeed,this.pointsArray=[],this.updateRecordPoints())},e.prototype.speedUpEffect=function(){var t=cc.instantiate(this.prefab_effect_speedUp);t.parent=this.node.parent,t.position=this.node.position,t.zIndex=cc.macro.MAX_ZINDEX,t.angle=this.node.angle,t.scale=this.node.width/(2*t.width),setTimeout(function(){t.destroy()},250)},e.prototype.shapeUpdate=function(t){if(this.hasMushroom){if(this.isBiging&&this.node.scale<a.SNAKE_SCALE)return void this.snakeToLarge(t);this.isShorting&&(this.node.scale>1&&this.snakeToTiny(t),this.SnakeArray.length>this.BodyLen+1&&this.snakeToShort(t),this.node.scale<=1&&this.SnakeArray.length<=this.BodyLen+1&&(this.isShorting=!1,this.hasMushroom=!1))}},e.prototype.shapeTurnToSmall=function(){this.isBiging=!1,this.isShorting=!0},e.prototype.snakeEatMushroom=function(){this.tempLen=0,this.hasMushroom=!0,this.SnakeToLong(),this.isBiging=!0,this.isShorting=!1,this.pointsArray=[],this.updateRecordPoints(),this.updateSnakeMiddleIndex(),this.hasShield&&this.shieldCtrl.updateNodeScale(this.SnakeArray.length*this.SectionLen)},e.prototype.SnakeToLong=function(){for(var t=0;t<a.SNAKE_STRONG_LENGHT;t++)this.addBodyToTail()},e.prototype.snakeToShort=function(t){this.tempLen+=t*a.SNAKE_STRONG_LENGHT,this.tempLen%1<.01&&this.removeBodyFromTail()},e.prototype.snakeToLarge=function(t){for(var e=0;e<this.SnakeArray.length;e++)this.SnakeArray[e].scale+=(a.SNAKE_SCALE-1)*t;this.hasShield&&(this.shieldCtrl.node.scale+=2*(a.SNAKE_SCALE-1)*t)},e.prototype.snakeToTiny=function(t){for(var e=0;e<this.SnakeArray.length;e++){var o=this.SnakeArray[e];o.scale=o.scale-(a.SNAKE_SCALE-1)*t,o.scale<1&&(o.scale=1)}this.hasShield&&(this.shieldCtrl.node.scale-=4*(a.SNAKE_SCALE-1)*t)},e.prototype.setOwnedCoinNumber=function(t){this.ownedCoins=t,this.updateUserOwnedCoins()},e.prototype.updateUserInfo=function(){this.userInfo&&(this.userInfo.position=cc.v3(this.node.position.x,this.node.position.y+100,0))},e.prototype.addUserInfoUi=function(){var t=cc.instantiate(this.prefab_userInfo);t.parent=this.node.parent,t.position=cc.v3(this.node.position.x,this.node.position.y+50,0),t.zIndex=cc.macro.MAX_ZINDEX,this.userInfo=t},e.prototype.revive=function(){this.showSnake(),this.pointsArray=[],this.updateRecordPoints(),this.snakeBornProtect(),this.addUserInfoUi()},e.prototype.onSnakeDeath=function(){this.snakeStatus!=a.SnakeStatus.Death&&(this.snakeStatus=a.SnakeStatus.Death,this.addFoodAfterSnakeDeath(),this.refreshAllCollider(),this.hideUserInfo(),this.hideSnake(),this.checkInterval&&clearInterval(this.checkInterval),this.hasShield&&this.shieldCtrl.shieldDisapper(),cc.systemEvent.emit("onSnakeDeath",this.snakeType,this.snakeId),this.snakeType===a.SnakeType.Self&&cc.systemEvent.emit("onGameEnd"))},e.prototype.snakeEatShield=function(){this.hasShield?this.shieldCtrl.resetShield():(this.addShiled(),this.updateSnakeMiddleIndex(),this.updateShieldPos(),this.updateShieldScale(),this.setShieldPersistTime(a.SHIELD_PERSIST_TIME))},e.prototype.addOwnedCoinNumber=function(t){this.ownedCoins+=t,this.updateUserOwnedCoins()},e.prototype.updateUserOwnedCoins=function(){this.userInfo&&(this.userInfo.getChildByName("score").getComponentInChildren(cc.Label).string=this.ownedCoins+"")},e.prototype.resetSnake=function(){this.hasAbsorb=!1,this.hasRocket=!1,this.hasMushroom=!1,this.hasShield=!1,this.tempLen=0,this.ownedCoins=0,this.absorbArea=a.AbsorbArea.Normal,this.snakeStatus=a.SnakeStatus.Alive,this.snakeProps=a.SnakeProps.None,this.snakeMoveState=a.SnakeMoveState.Normal,this._mulTimes=1,this._speed=a.SNAKE_SPEED,this.dir=cc.v3(1,0,0),this.refreshAllCollider(),this.effectInterval&&clearInterval(this.effectInterval)},e.prototype.addFoodAfterSnakeDeath=function(){for(var t=[],e=0;e<this.SnakeArray.length;e++)e%3==0&&t.push(this.SnakeArray[e].position);for(var o=t.length,n=Math.floor(this.ownedCoins/t.length),i=this.ownedCoins-n*o,r=s.default.getInstance(),a=0;a<o;a++){var c=void 0;(c=r.DeathBodyNodePool.size()>0?r.DeathBodyNodePool.get():cc.instantiate(this.prefab_deathBody)).parent=this.mapNode,c.position=t[a],a==o-1?c.getComponent(l.default).initDeathBody(n+i):c.getComponent(l.default).initDeathBody(n)}},r([h],e)}(c.default));o.default=d,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr","./BaseSnake":"BaseSnake","./DeathBody":"DeathBody"}],SnakeModeUnlimitedPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"29ce7oh5oxGMpc3f8PGJqhq","SnakeModeUnlimitedPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=t("../Manager/NodePoolMgr"),c=t("../Manager/SoundManager"),l=t("./BaseProp"),p=t("./BaseSnake"),h=t("./Food"),d=t("./SnakeModeUnlimited"),u=cc._decorator,f=u.ccclass,y=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initSnake=function(e,o,n){t.prototype.initSnake.call(this,e,o,n),this.addUserInfoUi(),this.addSnakeListener(),this.player=this.node.getComponent(cc.Collider)},e.prototype.initSnakeNew=function(e,o,n){this.skinType=Math.floor(Math.random()*this.skin.length),t.prototype.initSnakeNew.call(this,e,o,n),this.addUserInfoUi(),this.addSnakeListener(),this.player=this.node.getComponent(cc.Collider),this.setHeadView()},e.prototype.addSnakeListener=function(){cc.systemEvent.on("SnakeSpeedUp",this.onPlayerSpeedUp,this),cc.systemEvent.on("SnakeSpeedNormal",this.onPlayerSpeedNormal,this)},e.prototype.onPlayerSpeedUp=function(){this.onSnakeSpeedUp()},e.prototype.onPlayerSpeedNormal=function(){this.onSnakeSpeedNormal()},e.prototype.onSnakeSpeedUp=function(){this.score<=0?this.onSnakeSpeedNormal():this.snakeMoveState==a.SnakeMoveState.Normal&&(this._mulTimes=a.SNAKE_TIMES,this._speed=this._mulTimes*this._speed,this.snakeMoveState=a.SnakeMoveState.AddSpeed,this.pointsArray=[],this.updateRecordPoints())},e.prototype.speedUpEffect=function(){this.addEffect()},e.prototype.getEffectInstance=function(){var t=s.default.getInstance().EffectNodePool;return t.size()>0?t.get():cc.instantiate(this.prefab_effect_speedUp)},e.prototype.addEffect=function(){for(var t=this.SnakeArray.length,e=function(e){if(0==(e-1)%8&&t-e>7){var n=o.SnakeArray[e],i=o.getEffectInstance();i.getComponent(cc.Sprite).spriteFrame=o.skin[0].skinList[2],i.parent=o.node.parent,i.position=n.position,i.zIndex=cc.macro.MAX_ZINDEX,i.angle=n.angle,i.scale=n.width*n.scale/i.width,i.height=150,setTimeout(function(){s.default.getInstance().EffectNodePool.put(i)},300)}},o=this,n=1;n<t;n++)e(n)},e.prototype.colliderCheck=function(){var t;if(this.isOutMap())this.onSnakeDeath();else if(this.QuadCollision&&this.snakeStatus!=a.SnakeStatus.Death){for(var e=this.QuadCollision.check(this.player),o=e.retrieve,n=e.contacts,i=0,r=o.length;i<r;i++){var s=o[i].node;"Collider_Food"!=s.name&&"Collider_DeathBody"!=s.name||s.position.sub(this.node.position).mag()<this.eatArea&&(null===(t=s.getComponent(h.default))||void 0===t||t.setTargetNode(this.node))}for(var c=0,d=n.length;c<d;c++){var u=n[c].node;if(u.name.startsWith("Props_")&&u.getComponent(l.BaseProp).removeProp(this.snakeType,this.snakeId),!this.hasShield){if(u.name.startsWith("Collider_Body")){var f=u.script;if(f&&f.SnakeId!=this.SnakeId&&!f.hasShield){this.onSnakeDeath(),f.addKillNumber();break}}if(u.name.startsWith("Collider_Snake")){var y=u.getComponent(p.default);if(!y.hasShield){this.onSnakeDeath(),y.addKillNumber();break}}}}}},e.prototype.onSnakeRevive=function(){t.prototype.revive.call(this),this.snakeStatus=a.SnakeStatus.Alive},e.prototype.onSnakeDeath=function(){this.snakeStatus!=a.SnakeStatus.Death&&(t.prototype.onSnakeDeath.call(this),this.snakeType===a.SnakeType.Self&&cc.systemEvent.emit("onGameEnd"),c.default.getInstance().deathEffect())},e.prototype.updateRenderFrame=function(t){this.move(t),this.colliderCheck(t),this.updateShieldPos(),this.updateUserInfoPos(),this.snakeMoveState==a.SnakeMoveState.AddSpeed&&this.score>0&&this.updateSnakeScore(-1)},r([f],e)}(d.default));o.default=y,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr","../Manager/SoundManager":"SoundManager","./BaseProp":"BaseProp","./BaseSnake":"BaseSnake","./Food":"Food","./SnakeModeUnlimited":"SnakeModeUnlimited"}],SnakeModeUnlimitedRobot:[function(t,e,o){"use strict";cc._RF.push(e,"65693822gVEwoM7IlSmj2Kp","SnakeModeUnlimitedRobot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../Constant"),c=t("./BaseProp"),l=t("./BaseSnake"),p=t("./DeathBody"),h=t("./Food"),d=t("./SnakeModeUnlimited"),u=cc._decorator,f=u.ccclass;u.property,function(t){t[t.Attack=0]="Attack",t[t.Defend=1]="Defend",t[t.FindCoin=2]="FindCoin",t[t.NoCollider=3]="NoCollider"}(a||(a={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFindInterval=null,e.snakeAction=a.Attack,e.ignoreFrame=0,e.playerSkinType=-1,e}return i(e,t),e.prototype.initSnake=function(e,o,n){t.prototype.initSnake.call(this,e,o,n),this.addUserInfoUi(),this.setCheckColliderInterval(),this.player=this.node.getComponent(cc.Collider)},e.prototype.initSnakeNew=function(e,o,n,i){this.skinType=this.getRandomSkinType(),t.prototype.initSnakeNew.call(this,e,o,n,i),this.addUserInfoUi(),Math.random()>.5?this.snakeAction=a.Defend:this.snakeAction=a.Attack,this.setCheckColliderInterval(),this.player=this.node.getComponent(cc.Collider),this.setHeadView()},e.prototype.setPlayerSkinType=function(t){this.playerSkinType=t},e.prototype.getRandomSkinType=function(){for(var t=!0,e=-1;t;)e=Math.floor(Math.random()*this.skin.length),this.playerSkinType!=e&&(t=!1);return e},e.prototype.onLoad=function(){this.isCheckCollider=!0},e.prototype.colliderCheck=function(){var t,e;if(this.isOutMap())this.onSnakeDeath();else if(this.QuadCollision&&this.snakeStatus!=s.SnakeStatus.Death){var o=this.QuadCollision.check(this.player),n=o.retrieve,i=o.contacts;this.ignoreFrame++;for(var r=0,d=n.length;r<d;r++){var u=n[r].node;if(u.name.startsWith("Collider_Body")){var f=u.script;if(f.SnakeId==this.SnakeId)continue;if(this.hasShield)continue;if(this.ignoreFrame>=6&&(this.ignoreFrame=0),0!=this.ignoreFrame)continue;var y=u.position.sub(this.node.position).mag(),g=f.node.position.sub(this.node.position).mag();if(this.snakeAction==a.Defend){if(Math.random()>.5)continue;if(y>=80)continue;var _=cc.misc.degreesToRadians(30),v=this.node.position.sub(u.position).normalize(),m=cc.v2(v).rotate(_);this.dir=cc.v3(m.x,m.y)}else if(y>g){var S=u.position,k=f.dir.mul(300);this.dir=S.add(k).sub(this.node.position),this.onSnakeSpeedUp()}else{if(Math.random()>.5)continue;if(y>=80)continue;_=cc.misc.degreesToRadians(30),v=this.node.position.sub(u.position).normalize(),m=cc.v2(v).rotate(_),this.dir=cc.v3(m.x,m.y)}break}if("Collider_Food"==u.name&&(u.position.sub(this.collider_role.node.position).mag()<this.eatArea&&(null===(t=u.getComponent(h.default))||void 0===t||t.setTargetNode(this.node)),this.onSnakeSpeedNormal()),"Collider_DeathBody"==u.name){var b=u.position.sub(this.node.position);b.mag()<this.eatArea&&(null===(e=u.getComponent(p.default))||void 0===e||e.setTargetNode(this.node)),this.dir=b.normalize()}}for(var C=0,P=i.length;C<P;C++){var M=i[C].node;if(M.name.startsWith("Props_")&&M.getComponent(c.BaseProp).removeProp(this.snakeType,this.snakeId),!this.hasShield){if("Collider_Body"==M.name){var A=M.script;if(A&&A.SnakeId!=this.SnakeId&&!A.hasShield){this.onSnakeDeath(),A.addKillNumber();break}}if("Collider_Snake"==M.name){var R=M.getComponent(l.default);if(!R.hasShield){this.onSnakeDeath(),R.addKillNumber();break}}}}}},e.prototype.setRobotSnakeDiffcultLevel=function(t){this.setIntervalLevel(.01*t)},e.prototype.onSnakeRevive=function(){t.prototype.revive.call(this),this.snakeStatus=s.SnakeStatus.Alive},e.prototype.updateRenderFrame=function(t){this.autoChooseMoveDir(),this.move(t),this.colliderCheck(t),this.updateShieldPos(),this.updateUserInfoPos(),this.snakeMoveState==s.SnakeMoveState.AddSpeed&&this.score>0&&this.updateSnakeScore(-1)},e.prototype.autoChooseMoveDir=function(){var t=this.isNearWall(this.node.position);if(t!==l.Dir.Normal){var e=cc.misc.degreesToRadians(15),o=this.dir,n=cc.v2(o).rotate(e);return this.dir=cc.v3(n.x,n.y),void(this.isCircle?(t==l.Dir.Right&&(this.dir=cc.v3(-1,0,0)),t==l.Dir.Left&&(this.dir=cc.v3(1,0,0)),t==l.Dir.RightBottom&&(this.dir=cc.v3(-1,1,0)),t==l.Dir.RightTop&&(this.dir=cc.v3(-1,-1,0)),t==l.Dir.LeftBottm&&(this.dir=cc.v3(1,1,0)),t==l.Dir.LeftTop&&(this.dir=cc.v3(1,-1,0)),t==l.Dir.Top&&(this.dir=cc.v3(0,-1,0)),t==l.Dir.Bottom&&(this.dir=cc.v3(0,1,0))):(this.circleCount++,this.circleCount>120&&(this.isCircle=!0)))}this.isCircle=!1,this.circleCount=0},r([f],e)}(d.default);o.default=y,cc._RF.pop()},{"../Constant":"Constant","./BaseProp":"BaseProp","./BaseSnake":"BaseSnake","./DeathBody":"DeathBody","./Food":"Food","./SnakeModeUnlimited":"SnakeModeUnlimited"}],SnakeModeUnlimited:[function(t,e,o){"use strict";cc._RF.push(e,"2caa74bE25MjLjE/5IarNrn","SnakeModeUnlimited");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Constant"),c=t("../Manager/NodePoolMgr"),l=t("../SnakeDataMgr"),p=t("../Utils/SnakeUtils"),h=t("./BaseSnake"),d=t("./DeathBody"),u=cc._decorator,f=u.ccclass,y=u.property,g=p.SnakeUtilMgr.getInstance(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.snakeScale=1,e.eatArea=s.ABSORB_ORIGIN_AREA,e.player=null,e.viewList_deathBody=[],e.score=0,e}return i(e,t),e.prototype.addFoodAfterSnakeDeath=function(){for(var t=this.SnakeArray.length>s.FOOD_DROP_LENGTH?s.FOOD_DROP_LENGTH:this.SnakeArray.length,e=Math.floor((this.score>>1)/t),o=this.score-e*t,n=c.default.getInstance(),i=this.getRandomList(),r=0;r<t;r++){var a=void 0;(a=n.DeathBodyNodePool.size()>0?n.DeathBodyNodePool.get():cc.instantiate(this.prefab_deathBody)).getComponent(cc.Sprite).spriteFrame=this.viewList_deathBody[i[r%i.length]],a.parent=this.mapNode,a.position=this.SnakeArray[r].position,a.scale=this.SnakeArray[r].scale,a.x+=40*Math.random(),a.y+=40*Math.random(),r==t-1?a.getComponent(d.default).initDeathBody(e+o):a.getComponent(d.default).initDeathBody(e)}},e.prototype.getRandomList=function(){for(var t=[];t.length<3;){var e=Math.floor(8*Math.random());-1==t.indexOf(e)&&t.push(e)}return t},e.prototype.computedCurrentLevelByScore=function(){var t=Math.floor((this.score/30+1)/2);if(this.level<t){for(var e=t-this.level,o=0;o<e;o++)this.updateSnakeLength(),this.updateSnakeScale(.01),this.updateShieldScale(),this.addAbsorbArea();this.level=t}else if(this.level>t){for(e=this.level-t,o=0;o<e;o++)this.reduceSnakeLength(),this.updateSnakeScale(-.01),this.updateShieldScale(),this.reduceAbsorbArea();this.level=t}},e.prototype.updateUserInfoPos=function(){this.userInfo&&(this.userInfo.position=cc.v3(this.node.position.x,this.node.position.y+60,0))},e.prototype.addUserInfoUi=function(){var t=cc.instantiate(this.prefab_userInfo);t.parent=this.node.parent,t.position=cc.v3(this.node.position.x,this.node.position.y+40,0),t.zIndex=cc.macro.MAX_ZINDEX,this.userInfo=t},e.prototype.updateUserName=function(t,e){this.userInfo&&(this.userInfo.children[0].getComponent(cc.Label).string=t,e==s.SnakeType.Self?(this.userInfo.children[0].color=cc.Color.GREEN,this.userInfo.children[1].color=cc.Color.GREEN):(this.userInfo.children[0].color=cc.Color.WHITE,this.userInfo.children[1].color=cc.Color.WHITE))},e.prototype.updateSnakeScore=function(t){if(this.snakeStatus==s.SnakeStatus.Alive&&(this.score+=t,this.updateSnakeScoreLabel(),this.computedCurrentLevelByScore(),cc.systemEvent.emit("SCORE_UPDATE",this.score,this.SnakeId),this.snakeType==s.SnakeType.Self)){var e=l.SnakeDataMgr.getInstance();e.SnakeScore=this.score,e.SnakeLength=this.getSnakeLength()}},e.prototype.updateSnakeScoreLabel=function(){this.userInfo&&(this.userInfo.getChildByName("score").getComponent(cc.Label).string=this.score+"")},e.prototype.updateSnakeLength=function(){var t=this.getSnakeLength();this.snakeType==s.SnakeType.Other&&t>=s.SNAKE_MAX_LENGTH/2||t>=s.SNAKE_MAX_LENGTH||(l.SnakeDataMgr.getInstance().SnakeLength=t,this.updateSetionLen(),this.addBodyToTail(),this.updateSnakeMiddleIndex())},e.prototype.reduceSnakeLength=function(){this.getSnakeLength()<=s.SNAKE_MIN_LENGTH||(this.reduceSectionLen(),this.removeBodyFromTail(),this.updateSnakeMiddleIndex())},e.prototype.setAbsorbArea=function(t){this.eatArea=t},e.prototype.resumeAbsorbArea=function(){var t=s.ABSORB_ORIGIN_AREA+this.level;this.eatArea=t>s.SNAKE_ABSORB_MAX_AREA?s.SNAKE_ABSORB_MAX_AREA:t},e.prototype.addAbsorbArea=function(){this.eatArea>s.SNAKE_ABSORB_MAX_AREA||(this.eatArea+=1)},e.prototype.reduceAbsorbArea=function(){this.eatArea<=s.ABSORB_ORIGIN_AREA||(this.eatArea-=1)},e.prototype.updateSetionLen=function(){this.addSecitonLen()},e.prototype.updateSnakeScale=function(t){if(this.snakeScale>s.MAX_SNAKE_SCALE)this.snakeScale=s.MAX_SNAKE_SCALE;else if(this.snakeScale+=t,this.snakeScale<1)this.snakeScale=1;else for(var e=0;e<this.SnakeArray.length;e++)this.SnakeArray[e].scale=this.snakeScale},e.prototype.resetSnakeAllNodePos=function(t){for(var e=0;e<this.SnakeArray.length;e++)this.SnakeArray[e].active=!0,this.SnakeArray[e].position=t},e.prototype._genResetSnakeAllNodePos=function(t){var e;return a(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<this.SnakeArray.length?(this.SnakeArray[e].active=!0,this.SnakeArray[e].position=t,this.SnakeArray[e].parent=this.mapNode,[4]):[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype.revive=function(){var t=g.getRandomPos(this.mapNode.width/4,-this.mapNode.width/4);this.resetSnake(),this.effectInterval&&clearInterval(this.effectInterval),g.executePreFrame(this._genResetSnakeAllNodePos(t),5),this.userInfo.active=!0,this.pointsArray=[],this.updateRecordPoints(),this.snakeBornProtect()},e.prototype.setHeadView=function(){this.node.children[0].getComponent(cc.Sprite).spriteFrame=this.skin[this.skinType].skinList[3],this.node.children[0].scale=.5},e.prototype.hideUserInfo=function(){this.userInfo.active=!1},e.prototype.onSnakeDeath=function(){this.snakeStatus!=s.SnakeStatus.Death&&(this.snakeStatus=s.SnakeStatus.Death,this.checkInterval&&clearInterval(this.checkInterval),this.hideUserInfo(),this.hideSnake(),this.addFoodAfterSnakeDeath(),this.refreshAllCollider(),this.hasShield&&this.shieldCtrl.shieldDisapper(),cc.systemEvent.emit("onRobotSnakeDeath",this.snakeType,this.snakeId),cc.systemEvent.emit("onSnakeDeath",this.snakeType,this.snakeId))},e.prototype.isOutMap=function(){return Math.abs(this.node.x)>=this.mapNode.width/2-30||Math.abs(this.node.y)>=this.mapNode.height/2-30},e.prototype.onSnakeSpeedUp=function(){this.snakeMoveState==s.SnakeMoveState.Normal&&(this._mulTimes=1.8,this._speed=this._mulTimes*this._speed,this.snakeMoveState=s.SnakeMoveState.AddSpeed,this.pointsArray=[],this.updateRecordPoints())},r([y([cc.SpriteFrame])],e.prototype,"viewList_deathBody",void 0),r([f],e)}(h.default);o.default=_,cc._RF.pop()},{"../Constant":"Constant","../Manager/NodePoolMgr":"NodePoolMgr","../SnakeDataMgr":"SnakeDataMgr","../Utils/SnakeUtils":"SnakeUtils","./BaseSnake":"BaseSnake","./DeathBody":"DeathBody"}],SnakeUtils:[function(t,e,o){"use strict";cc._RF.push(e,"4c1e88oACtM9648SbP07lMk","SnakeUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.SnakeUtilMgr=void 0;var n=t("../../../../Script/Utils/utils_common"),i=t("../SnakeDataMgr"),r=function(){function t(){this._seed=null,this.seededRandom=function(t,e,o){t=t||1,e=e||0;var n=o/233280;return Math.ceil(e+n*(t-e))}}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"Seed",{get:function(){return this._seed},set:function(t){this._seed=t},enumerable:!1,configurable:!0}),t.prototype.getRandomNumer=function(t,e){t=t||1,e=e||0;var o=this.Seed/233280;return this.Seed=(9301*this.Seed+49297)%233280,Math.floor(e+o*(t-e))},t.prototype.getRandomList=function(t,e,o){e=e||1,o=o||0;for(var n=[],i=0;i<t;i++){var r=this.getRandomNumer(e,o);n.push(r)}return n},t.prototype.getRandomPos=function(t,e){t=t||1,e=e||0;var o=this.getRandomNumer(t,e),n=this.getRandomNumer(t,e);return cc.v3(o,n,0)},t.prototype.getRandomPosList=function(t,e,o){e=e||1,o=o||0;for(var n=[],i=this.getRandomList(t,e,o),r=this.getRandomList(t,e,o),a=0;a<t;a++){var s=cc.v3(i[a],r[a]);n.push(s)}return n},t.prototype.createRandomListBySeed=function(t,e,o,n){for(var i=o,r=[],a=0;a<n;a++){var s=this.seededRandom(t,e,i);r.push(s),i=(9301*i+49297)%233280}return r},t.prototype.createRandomPosListBySeedList=function(t,e,o){if(!t||t.length<=0)console.error("the arrange list is null");else if(!e||e.length<=0)console.error("the seedList is null");else{if(o){var n=t[0],i=t[1];n<i&&(n=t[1],i=t[0]);for(var r=this.createRandomListBySeed(n,i,e[0],o),a=this.createRandomListBySeed(n,i,e[1],o),s=[],c=0;c<o;c++){var l=cc.v3(r[c],a[c],0);s.push(l)}return s}console.error("len is null or 0")}},t.prototype.executePreFrame=function(t,e){return new Promise(function(o){var n=t,i=function(){for(var t=(new Date).getTime(),r=n.next();;r=n.next()){if(null==r||r.done)return void o(null);if((new Date).getTime()-t>e)return void setTimeout(function(){i()})}};i()})},t.prototype.getIsTodayFirstRevive=function(){var t=cc.sys.localStorage.getItem("firstResurrection");return null==t||null==t||t!=n.formatDate(i.SnakeDataMgr.getInstance().loginServerTime)},t.prototype.setFirstRevive=function(){var t=n.formatDate(i.SnakeDataMgr.getInstance().loginServerTime);cc.sys.localStorage.setItem("firstResurrection",t)},t._instance=null,t}();o.SnakeUtilMgr=r,cc._RF.pop()},{"../../../../Script/Utils/utils_common":void 0,"../SnakeDataMgr":"SnakeDataMgr"}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"3a3ackCfkFCWYvhHwNxc2Qa","SoundManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../Script/Utils/App_connect"),i=function(){function t(){this.type=cc.Enum({effect:1,music:2}),this.effectCacheList=null,this.bgCacheList=null,this.playingList=null,this.currentBgId=-1,this.isOthersBeting=!1,this.isOn=!1,this.effectCacheList=new Map,this.bgCacheList=new Map,this.playingList=new Map}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.loadAudioResource=function(t,e){var o=this;cc.resources.loadDir(t,cc.AudioClip,function(t,n){if(t)console.log(t);else{var i;i=e==o.type.effect?o.effectCacheList:o.bgCacheList;for(var r=0,a=n.length;r<a;r++){var s=n[r];i.has(s._name)||i.set(s._name,s)}}})},t.prototype.loadResourceInBundle=function(t,e,o){var n=this;cc.assetManager.getBundle(t).loadDir(e,cc.AudioClip,function(t,e){if(t)console.log(t);else{var i;i=o==n.type.effect?n.effectCacheList:n.bgCacheList;for(var r=0,a=e.length;r<a;r++){var s=e[r];i.has(s._name)||i.set(s._name,s)}}})},t.prototype.isAudioOn=function(){var t=cc.sys.localStorage.getItem("isAudioOn");return null==t?(this.openAudio(),this.isOn=!0,!0):"on"===t?(this.isOn=!0,!0):(this.isOn=!1,!1)},t.prototype.openAudio=function(){cc.sys.localStorage.setItem("isAudioOn","on"),this.isOn=!0},t.prototype.closeAudio=function(){cc.sys.localStorage.setItem("isAudioOn","off"),this.isOn=!1},t.prototype.playEffect=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=.5),this.effectCacheList.has(t)){var n=this.effectCacheList.get(t);cc.audioEngine.play(n,e,o),this.playingList.has(t)||this.playingList.set(t,n)}else console.log("Check the effectName "+t+" , this audioClip is no exist!")},t.prototype.stopEffect=function(t){cc.audioEngine.stop(t)},t.prototype.stopAllEffect=function(){cc.audioEngine.stopAllEffects()},t.prototype.pauseAudio=function(){cc.audioEngine.pauseAllEffects()},t.prototype.playBg=function(t,e,o){var n=this;if(void 0===e&&(e=!0),void 0===o&&(o=.5),this.bgCacheList.has(t)){var i=this.bgCacheList.get(t);this.currentBgId=cc.audioEngine.play(i,e,o),this.playingList.has(t)||this.playingList.set(t,i)}else setTimeout(function(){n.playBg(t,e,o)},1e3)},t.prototype.stopBGM=function(){this.currentBgId&&cc.audioEngine.stop(this.currentBgId)},t.prototype.stopAllSound=function(){cc.audioEngine.stopAll()},t.prototype.eatLittleFoodEffect=function(){this.isOn&&(n.isIos()?this.playEffect("effect_tap",!1,1):this.playEffect("effect_tap",!1,.3))},t.prototype.eatBigFoodEffect=function(){this.isOn&&(n.isIos()?this.playEffect("effect_eat_big",!1,.8):this.playEffect("effect_eat_big",!1,.2))},t.prototype.deathEffect=function(){this.isOn&&(n.isIos()?this.playEffect("effect_end",!1,1.5):this.playEffect("effect_end",!1,.3))},t.prototype.playTapEffect=function(){this.isOn&&this.playEffect("effect_tap",!1,.5)},t.prototype.playEffectRemove=function(){this.isOn&&this.playEffect("effect_remove",!1,.3)},t.prototype.playStartBgm=function(){this.stopAllSound(),n.isIos()?this.playBg("bgm_start",!0,.5):this.playBg("bgm_start",!0,.3)},t.prototype.playGamingBmg=function(){this.isOn&&(this.stopAllSound(),n.isIos()?this.playBg("bgm_game",!0,1.5):this.playBg("bgm_game",!0,.5))},t}();o.default=i,cc._RF.pop()},{"../../../../Script/Utils/App_connect":void 0}],SpeedUp:[function(t,e,o){"use strict";cc._RF.push(e,"1c6268aSi5LQplEl6Fd/CK8","SpeedUp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpeedUp=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_effect=null,e}return i(e,t),e.prototype.onLoad=function(){this.addSpeedUpListener(),this.node_effect.active=!1},e.prototype.onDestroy=function(){this.removeSpeedUpListener()},e.prototype.showSpeedEffect=function(){this.node_effect.active=!0},e.prototype.addSpeedUpListener=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onSpeedUpBtnTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onSpeedUpBtnTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onSpeedUpBtnTouchEnd,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSpeedUpBtnTouchStart,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSpeedUpBtnTouchEnd,this)},e.prototype.removeSpeedUpListener=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onSpeedUpBtnTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onSpeedUpBtnTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onSpeedUpBtnTouchEnd,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onSpeedUpBtnTouchStart,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onSpeedUpBtnTouchEnd,this)},e.prototype.onSpeedUpBtnTouchStart=function(){cc.systemEvent.emit("SnakeSpeedUp"),this.node_effect.active=!0},e.prototype.onSpeedUpBtnTouchEnd=function(){cc.systemEvent.emit("SnakeSpeedNormal"),this.node_effect.active=!1},r([c(cc.Node)],e.prototype,"node_effect",void 0),r([s],e)}(cc.Component);o.SpeedUp=l,cc._RF.pop()},{}],StateDisplayCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"d3226YB2QFOYJ/C3NWLKDq5","StateDisplayCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_absorb=null,e.absorbInterval=-1,e}return i(e,t),e.prototype.onDestroy=function(){this.absorbInterval&&clearInterval(this.absorbInterval)},e.prototype.hideAllChild=function(){for(var t=this.node.children,e=0,o=t.length;e<o;e++)t[e].active=!1},e.prototype.removeState=function(){this.absorbInterval&&clearInterval(this.absorbInterval),this.node_absorb.active=!1},e.prototype.setAbsorbInterval=function(t){var e=this;this.node_absorb.active=!0,this.absorbInterval&&clearInterval(this.absorbInterval);var o=this.node_absorb.getChildByName("mask").getComponent(cc.Sprite);o.fillRange=1;var n=1/a.ABSORB_DURATION;this.absorbInterval=setInterval(function(){o.fillRange-=n,o.fillRange<=0&&(t&&t(),clearInterval(e.absorbInterval),e.node_absorb.active=!1)},1e3)},e.prototype.start=function(){this.hideAllChild()},r([l(cc.Node)],e.prototype,"node_absorb",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Constant":"Constant"}],TruetiemRankCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"0ac06Y6MwtJXY2Qj+ZA+VqZ","TruetiemRankCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Constant"),s=t("../SnakeDataMgr"),c=t("../Prefab/item/item_trueTimeRank"),l=t("../../../../Script/Managers/GameMgr"),p=cc._decorator,h=p.ccclass,d=p.property,u=[cc.v3(0,100,0),cc.v3(0,50,0),cc.v3(0,0,0),cc.v3(0,-50,0),cc.v3(0,-100,0)],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab_trueTimerankItem=null,e.showList=[],e.totalList=[],e.scoreUpdateTimes=0,e.myPlayer=null,e.displayDir=1,e}return i(e,t),e.prototype.onLoad=function(){this.addEventListener()},e.prototype.onDestroy=function(){this.removeEventListener(),s.SnakeDataMgr.getInstance().AiSnakeList=[]},e.prototype.addEventListener=function(){cc.systemEvent.on("SCORE_UPDATE",this.onScoreUpdate,this)},e.prototype.removeEventListener=function(){cc.systemEvent.off("SCORE_UPDATE",this.onScoreUpdate,this)},e.prototype.onScoreUpdate=function(t,e){this.scoreUpdateTimes++,this.updateScoreById(t,e),this.scoreUpdateTimes%20==0&&this.updateRankPosition()},e.prototype.initRankItem=function(t,e){var o=cc.instantiate(this.prefab_trueTimerankItem);o.getComponent(c.default).init(t),o.parent=this.node;var n=u[e];o.position=n},e.prototype.comfirmDirNumber=function(){l.default.getInstance().Language==a.LANGUAGE_TYPE.ARAB?this.displayDir=-1:this.displayDir=1},e.prototype.initRankList=function(t){this.showList=t;for(var e=0,o=t.length;e<o;e++){var n=t[e];this.initRankItem(n,e)}},e.prototype.getInfoById=function(t,e){for(var o=null,n=0,i=e.length;n<i;n++)if(t==e[n].id){o=e[n];break}return o},e.prototype.isContainId=function(t,e){for(var o=!1,n=0,i=e.length;n<i;n++)if(t===e[n].id){o=!0;break}return o},e.prototype.updateScoreById=function(t,e){e==l.default.getInstance().UserId?this.totalList[100].score=t:this.totalList[e].score=t},e.prototype.getShowList=function(t){var e=[];if(t.length<5)e=t;else{var o=JSON.parse(JSON.stringify(t));if(o.sort(function(t,e){return e.score-t.score}),o.map(function(t,e){return t.rank=e+1,t}),e=o.slice(0,5),!this.isContainId(s.SnakeDataMgr.getInstance().UserId,e)){var n=this.getInfoById(s.SnakeDataMgr.getInstance().UserId,o);e.pop(),e.push(n)}}return e},e.prototype.swapTwoNode=function(t,e){var o=t.position,n=e.position;cc.tween(t).to(.5,{position:n}).start(),cc.tween(e).to(.5,{position:o}).start()},e.prototype.getNodeByPropsName=function(t,e){for(var o=this.node.children,n=null,i=0,r=o.length;i<r;i++){var a=o[i];if(a.getComponent(c.default)[t]==e){n=a;break}}return n},e.prototype.getNodeById=function(t){for(var e=this.node.children,o=null,n=0,i=e.length;n<i;n++){var r=e[n];if(r.getComponent(c.default).id==t){o=r;break}}return o},e.prototype.updateRankPosition=function(){for(var t=this.getShowList(this.totalList),e=0,o=t.length;e<o;e++){var n=t[e],i=this.getNodeByPropsName("id",n.id),r=null;if(i){if((r=i.getComponent(c.default)).setScore(n.score),r.rank!=n.rank){r.setRank(n.rank);var a=n.rank>u.length?u[u.length-1]:u[n.rank-1];i.stopAllActions(),i.setSiblingIndex(n.rank-1),cc.tween(i).to(.5,{position:a}).start()}}else{(i=this.node.children[4]).getComponent(c.default).id===l.default.getInstance().UserId&&(i=this.node.children[3]),i.getComponent(c.default).init(n),i.stopAllActions(),i.setSiblingIndex(n.rank-1);var s=u[n.rank-1];cc.tween(i).to(.5,{position:s}).start()}}},e.prototype.addSnakeInfoToTotalList=function(t){this.totalList.push(t)},e.prototype.initRankData=function(){var t=s.SnakeDataMgr.getInstance();this.totalList=JSON.parse(JSON.stringify(t.AiSnakeList));var e=t.getPlayerInfo();this.totalList.push(e);var o=this.getShowList(this.totalList);this.initRankList(o)},e.prototype.showRankList=function(){this.node.active=!0},e.prototype.start=function(){},r([d(cc.Prefab)],e.prototype,"prefab_trueTimerankItem",void 0),r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../Script/Managers/GameMgr":void 0,"../Constant":"Constant","../Prefab/item/item_trueTimeRank":"item_trueTimeRank","../SnakeDataMgr":"SnakeDataMgr"}],UnlimitedFood:[function(t,e,o){"use strict";cc._RF.push(e,"9a9beyWiLdHSZHhgBPZ2POg","UnlimitedFood");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Food"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.settle=function(){},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./Food":"Food"}],arab:[function(t,e,o){"use strict";cc._RF.push(e,"7e8cdps7LlJp4dQYYBa79On","arab"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={kill:"       \u0642\u062a\u0644  ",exitGame:" \u0627\u0644\u062e\u0631\u0648\u062c \u0645\u0646 \u0627\u0644\u0644\u0639\u0628\u0629 ",resurrect:" \u0625\u062d\u064a\u0627\u0621  ",previewRank:" \u0627\u0644\u062a\u0631\u062a\u064a\u0628 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a \u0627\u0644\u0645\u064f\u062a\u0648\u0642\u0639   ",continueGame:" \u0627\u0633\u062a\u0645\u0631\u0627\u0631 \u0627\u0644\u0644\u0639\u0628\u0629 ",weeklyList:" \u0627\u0644\u062a\u0631\u062a\u064a\u0628 \u0627\u0644\u0627\u0633\u0628\u0648\u0639\u064a     ",rules:" \u0627\u0644\u0642\u0648\u0627\u0639\u062f ",startChallenge:" \u0627\u0628\u062f\u0623 \u0627\u0644\u062a\u062d\u062f\u064a   ",weeklyBest:" {} \u0623\u0639\u0644\u064a \u0633\u062c\u0644 \u0644\u064a ",personalBest:" {} \u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u0644\u0627\u0646\u0647\u0627\u0626\u064a \u060c \u0623\u0639\u0644\u0649 \u0633\u062c\u0644  ",Ranking:"  \u0627\u0644\u062a\u0631\u062a\u064a\u0628  ",tips:{lab_client_1003:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0634\u0628\u0643\u0629 \u0648\u062d\u0627\u0648\u0644 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",lab_client_1004:"  \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0634\u0628\u0643\u0629  ",lab_client_1005:" \u062a\u0645 \u0631\u0628\u0637 \u0627\u0644\u0634\u0628\u0643\u0629 \u0628\u0646\u062c\u0627\u062d ",lab_server_10802:"\u0639\u0645\u0644\u0627\u062a\u0643 \u0627\u0644\u0630\u0647\u0628\u064a\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629\u060c \u064a\u0631\u062c\u0649 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0634\u062d\u0646.",lab_server_10031:" \u0641\u0634\u0644\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629  ",lab_server_10001:" \u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 ",lab_server_10013:" \u0627\u0644\u0644\u0639\u0628\u0629 \u0642\u064a\u062f \u0627\u0644\u0635\u064a\u0627\u0646\u0629 \u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649 \u0644\u0627\u062d\u0642\u064b\u0627 "}},cc._RF.pop()},{}],en:[function(t,e,o){"use strict";cc._RF.push(e,"744d1wMHQBAnIplMUulw5M1","en"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={kill:"Kill",exitGame:"Exit the game",resurrect:"Resurrect ",previewRank:"Expected weekly ranking",continueGame:"Continue the game",weeklyList:" Weekly list ",rules:"Rules",startChallenge:"Start Challenge",weeklyBest:"Endless mode, highest record {}",personalBest:"My highest record {}",Ranking:" Ranking ",tips:{lab_client_1003:"Please check network status...",lab_client_1004:"The network is reconnecting...",lab_client_1005:"Network connection successful",lab_server_10802:"Your Gold is running low, go and recharge.",lab_server_10031:"Operation failure!",lab_server_10001:"Login error",lab_server_10013:"Game maintenance, please try again later"}},cc._RF.pop()},{}],index:[function(t,e,o){"use strict";cc._RF.push(e,"31c8eWgpeNHIbXLBQh9U62u","index"),Object.defineProperty(o,"__esModule",{value:!0}),o.language=void 0;var n=t("./arab"),i=t("./en");o.language={ar:n.default,en:i.default},cc._RF.pop()},{"./arab":"arab","./en":"en"}],item_settleRank:[function(t,e,o){"use strict";cc._RF.push(e,"ba604AK1ARLXKZo+aj03c6C","item_settleRank");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../../Script/Managers/GameMgr"),s=t("../../../../../Script/Utils/utils_common"),c=t("../../Constant"),l=t("../../Index/prefab_avatar_ctrl"),p=cc._decorator,h=p.ccclass,d=p.property,u={slef:cc.color(253,245,121),other:cc.Color.WHITE},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_name=null,e.text_score=null,e.node_rankIcon=null,e.node_rankLabel=null,e.node_color=null,e.node_avatar=null,e.rankIconList=[],e.score=0,e.rank=0,e.id=0,e}return i(e,t),e.prototype.init=function(t){this.setName(t.name),this.setScore(t.length),this.setRank(t.rankNo),this.setAvatar(t.avatar),this.setOtherStyle()},e.prototype.setPlayerStyle=function(t){this.setNodeColor(u.slef,this.text_name.node),this.setNodeColor(u.slef,this.text_score.node),t<3||(this.setNodeColor(u.slef,this.node_rankLabel),this.node_color.color=u.slef)},e.prototype.setOtherStyle=function(){this.setNodeColor(cc.Color.WHITE,this.text_name.node),this.setNodeColor(cc.Color.WHITE,this.text_score.node),this.setNodeColor(cc.Color.WHITE,this.node_rankLabel)},e.prototype.setRank=function(t){this.rank=t,t<=3?(this.node_rankIcon.active=!0,this.node_rankLabel.active=!1,this.node_rankIcon.getComponent(cc.Sprite).spriteFrame=this.rankIconList[t-1]):(this.node_rankIcon.active=!1,this.node_rankLabel.active=!0,this.node_rankLabel.getComponent(cc.Label).string=t>100?"100+":t+"")},e.prototype.setScore=function(t){this.score=t,this.setLabelString(this.text_score,t.toLocaleString("en-US"))},e.prototype.setName=function(t){a.default.getInstance().Language,c.LANGUAGE_TYPE.EN;var e=s.subStr(t,10,"...",1);this.setLabelString(this.text_name,e)},e.prototype.setLabelString=function(t,e){var o=e+"";t.string=o},e.prototype.setNodeColor=function(t,e){e.color=t},e.prototype.setAvatar=function(t){this.node_avatar.getComponent(l.default).setAvatarView(56,t,cc.Mask.Type.ELLIPSE)},e.prototype.start=function(){},r([d(cc.Label)],e.prototype,"text_name",void 0),r([d(cc.Label)],e.prototype,"text_score",void 0),r([d(cc.Node)],e.prototype,"node_rankIcon",void 0),r([d(cc.Node)],e.prototype,"node_rankLabel",void 0),r([d(cc.Node)],e.prototype,"node_color",void 0),r([d(cc.Node)],e.prototype,"node_avatar",void 0),r([d([cc.SpriteFrame])],e.prototype,"rankIconList",void 0),r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../../Script/Managers/GameMgr":void 0,"../../../../../Script/Utils/utils_common":void 0,"../../Constant":"Constant","../../Index/prefab_avatar_ctrl":"prefab_avatar_ctrl"}],item_trueTimeRank:[function(t,e,o){"use strict";cc._RF.push(e,"20409Fv7AVC75v7vhnz++oU","item_trueTimeRank");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../../Script/Managers/GameMgr"),s=t("../../../../../Script/Utils/utils_common"),c=t("../../Constant"),l=t("../../Index/prefab_avatar_ctrl"),p=t("../../SnakeDataMgr"),h=cc._decorator,d=h.ccclass,u=h.property,f=[cc.color(246,220,91),cc.color(244,244,244),cc.color(208,152,123),cc.color(64,87,130)],y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_name=null,e.text_score=null,e.node_rankIcon=null,e.node_rankLabel=null,e.node_color=null,e.node_avatar=null,e.rankIconList=[],e.score=0,e.rank=0,e.id=0,e}return i(e,t),e.prototype.init=function(t){this.setName(t.name),this.setScore(t.score),this.setRank(t.rank),this.setAvatar(t.avatar),this.id=t.id,this.id==p.SnakeDataMgr.getInstance().UserId?this.setPlayerStyle(t.rank):this.setOtherStyle()},e.prototype.setPlayerStyle=function(t){this.setNodeColor(cc.Color.GREEN,this.text_name.node),this.setNodeColor(cc.Color.GREEN,this.text_score.node),t<3||this.setNodeColor(cc.Color.GREEN,this.node_rankLabel)},e.prototype.setOtherStyle=function(){this.setNodeColor(cc.Color.WHITE,this.text_name.node),this.setNodeColor(cc.Color.WHITE,this.text_score.node),this.setNodeColor(cc.Color.WHITE,this.node_rankLabel)},e.prototype.setRank=function(t){this.rank=t,t<=3?(this.node_rankIcon.active=!0,this.node_rankLabel.active=!1,this.node_rankIcon.getComponent(cc.Sprite).spriteFrame=this.rankIconList[t-1],this.node_color.color=f[t-1]):(this.node_rankIcon.active=!1,this.node_rankLabel.active=!0,this.node_color.color=f[3],this.node_rankLabel.getComponent(cc.Label).string=t+"")},e.prototype.setScore=function(t){this.score=t,this.setLabelString(this.text_score,t.toLocaleString("en-US"))},e.prototype.setName=function(t){a.default.getInstance().Language,c.LANGUAGE_TYPE.EN;var e=s.subStr(t,10,"...",1);this.setLabelString(this.text_name,e)},e.prototype.setLabelString=function(t,e){var o=e+"";t.string=o},e.prototype.setNodeColor=function(t,e){e.color=t},e.prototype.setAvatar=function(t){this.node_avatar.getComponent(l.default).setAvatarView(36,t,cc.Mask.Type.ELLIPSE)},e.prototype.start=function(){},r([u(cc.Label)],e.prototype,"text_name",void 0),r([u(cc.Label)],e.prototype,"text_score",void 0),r([u(cc.Node)],e.prototype,"node_rankIcon",void 0),r([u(cc.Node)],e.prototype,"node_rankLabel",void 0),r([u(cc.Node)],e.prototype,"node_color",void 0),r([u(cc.Node)],e.prototype,"node_avatar",void 0),r([u([cc.SpriteFrame])],e.prototype,"rankIconList",void 0),r([d],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../../Script/Managers/GameMgr":void 0,"../../../../../Script/Utils/utils_common":void 0,"../../Constant":"Constant","../../Index/prefab_avatar_ctrl":"prefab_avatar_ctrl","../../SnakeDataMgr":"SnakeDataMgr"}],prefab_avatar_ctrl:[function(t,e,o){"use strict";cc._RF.push(e,"f33bef6VQJPdL9UsEqDRtsy","prefab_avatar_ctrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../Script/Utils/utils_common"),l=cc._decorator,p=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatarSize=null,e.mask=null,e.sprite_avatar=null,e.default_avatar=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){},e.prototype.setDefaultView=function(t,e,o){this.setAvatarSize(t),this.formatImage(this.default_avatar),this.setMaskMode(o)},e.prototype.setAvatarView=function(t,e,o){this.setAvatarSize(t),this.setMaskMode(o),this.setAvatar(e),this.setMaskSize(t)},e.prototype.setAvatarBySpriteFrame=function(){},e.prototype.setAvatarSize=function(t){this.avatarSize=t},e.prototype.setMaskSize=function(t){this.mask.node.height=t,this.mask.node.width=t},e.prototype.setAvatar=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,c.loadPictureByUrl(t)];case 1:return e=o.sent(),[3,3];case 2:return o.sent(),e=this.sprite_avatar.spriteFrame,[3,3];case 3:return this.showImageFull(e),[2]}})})},e.prototype.formatImage=function(t){var e=Math.min(t._originalSize.height,t._originalSize.width);this.sprite_avatar.spriteFrame=t,this.sprite_avatar.node.scale=this.avatarSize/e},e.prototype.showImageFull=function(t){var e=t.getOriginalSize(),o=Math.max(e.height,e.width);this.sprite_avatar.spriteFrame=t,this.sprite_avatar.node.scale=this.avatarSize/o},e.prototype.setMaskMode=function(t){this.mask.type=t,this.mask.type==cc.Mask.Type.IMAGE_STENCIL?(this.mask.spriteFrame=this.sprite_avatar.spriteFrame,this.mask.alphaThreshold=.3):this.mask.type==cc.Mask.Type.ELLIPSE&&(this.mask.segements=64)},e.prototype.start=function(){},r([h(cc.Mask)],e.prototype,"mask",void 0),r([h(cc.Sprite)],e.prototype,"sprite_avatar",void 0),r([h(cc.SpriteFrame)],e.prototype,"default_avatar",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../Script/Utils/utils_common":void 0}],prefab_rank_item_ctrl:[function(t,e,o){"use strict";cc._RF.push(e,"3a6faH/fFVBLJcoteb5sef+","prefab_rank_item_ctrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Script/Managers/GameMgr"),s=t("../../../../Script/Utils/utils_common"),c=t("../Constant"),l=t("./prefab_avatar_ctrl"),p=cc._decorator,h=p.ccclass,d=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_rank=null,e.node_avatar=null,e.text_user_name=null,e.text_score=null,e.node_rank=null,e.viewList_rank=[],e.viewList_bg=[],e.bg_item=null,e}return i(e,t),e.prototype.initRankItem=function(t){var e=t.avatar,o=t.name,n=t.rankNo,i=t.length,r=t.userId,c=!1;this.setDescribeText(),this.setUserRank(n);var l=s.numberFormat(i.toNumber());this.setLabeString(this.text_score,l),this.setUserName(o),this.setUserAvatar(e),r.toNumber()==a.default.getInstance().UserId&&(c=!0),this.setItemBg(c)},e.prototype.setItemBg=function(t){this.bg_item.spriteFrame=t?this.viewList_bg[1]:this.viewList_bg[0]},e.prototype.setUserRank=function(t){t<=3?(this.text_rank.node.active=!1,this.node_rank.getComponent(cc.Sprite).spriteFrame=this.viewList_rank[t-1]):(this.text_rank.node.active=!0,this.node_rank.active=!1,this.setLabeString(this.text_rank,t+""))},e.prototype.setUserName=function(t){var e;e=a.default.getInstance().Language==c.LANGUAGE_TYPE.EN?1:2;var o=s.subStr(t,20,"...",e);this.setLabeString(this.text_user_name,o)},e.prototype.setDescribeText=function(){},e.prototype.setUserAvatar=function(t){var e=this.node_avatar.getComponent(l.default);e.setDefaultView(61,null,cc.Mask.Type.ELLIPSE),t&&e.setAvatarView(61,t,cc.Mask.Type.ELLIPSE)},e.prototype.setLabeString=function(t,e){t.string=e,t._forceUpdateRenderData(!0)},r([d(cc.Label)],e.prototype,"text_rank",void 0),r([d(cc.Node)],e.prototype,"node_avatar",void 0),r([d(cc.Label)],e.prototype,"text_user_name",void 0),r([d(cc.Label)],e.prototype,"text_score",void 0),r([d(cc.Node)],e.prototype,"node_rank",void 0),r([d([cc.SpriteFrame])],e.prototype,"viewList_rank",void 0),r([d([cc.SpriteFrame])],e.prototype,"viewList_bg",void 0),r([d(cc.Sprite)],e.prototype,"bg_item",void 0),r([h],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../../Script/Managers/GameMgr":void 0,"../../../../Script/Utils/utils_common":void 0,"../Constant":"Constant","./prefab_avatar_ctrl":"prefab_avatar_ctrl"}]},{},["DisplayArabAndEn","LinearGradient","Constant","IndexCtrl","Index_RankCtrl","PromptHelpCtrl","prefab_avatar_ctrl","prefab_rank_item_ctrl","JoyStick","arab","en","index","NodePoolMgr","SoundManager","BaseProp","BaseSnake","DeathBody","Food","ShieldCtr","SnakeModeGold","SnakeModeGoldPlayer","SnakeModeGoldRobot","SnakeModeUnlimited","SnakeModeUnlimitedPlayer","SnakeModeUnlimitedRobot","UnlimitedFood","item_settleRank","item_trueTimeRank","SnakeDataMgr","SpeedUp","BaseLayer","CollisionCtrl","DialogGameEndCtrl","FoodLayerCtrl","GameGoldModeUiCtrl","GameUiControl","GameUnlimitedModeSnakeCreateCtrl","GameUnlimitedModeUiCtrl","NumberNoticeCtrl","PlayerViewCameraCtrl","PropsLayerCtrl","SettingCtrl","StateDisplayCtrl","TruetiemRankCtrl","CustomQuatdtreeCollision","Decimal","QuadtreeCollision","SnakeUtils"]);